var Au=Object.defineProperty,Bu=Object.defineProperties;var Wu=Object.getOwnPropertyDescriptors;var hu=Object.getOwnPropertySymbols;var Iu=Object.prototype.hasOwnProperty,Fu=Object.prototype.propertyIsEnumerable;var ou=(n,e,t)=>e in n?Au(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,g=(n,e)=>{for(var t in e||(e={}))Iu.call(e,t)&&ou(n,t,e[t]);if(hu)for(var t of hu(e))Fu.call(e,t)&&ou(n,t,e[t]);return n},N=(n,e)=>Bu(n,Wu(e));var R=(n,e,t)=>(ou(n,typeof e!="symbol"?e+"":e,t),t);import{s as $u,j as u,O as lu,d as Ou,a as Ru,b as Lu,c as Nu,u as j,L as _,e as mu,A as Uu,C as cu,f as r,T as Mu,g as d,B as p,h as U,I as fu,i as _u,k as Pu,D as ju,l as Gu,r as o,m as V,n as su,o as tu,p as I,F as D,q as f,t as xu,v as X,w as Z,x as Q,y as G,z as q,E as du,M as Cu,S as yu,G as Hu,H as gu,J as bu,K as zu,N as Ku,P as Vu,Q as Xu,R as Zu,U as qu,V as Ju,W as P,X as Qu,Y as Yu,Z as u4,_ as e4,$ as t4,a0 as n4,a1 as s4,a2 as r4}from"./vendor.46f37d01.js";const a4=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerpolicy&&(i.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?i.credentials="include":a.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}};a4();const i4=$u("main")({flexGrow:1,margin:10}),o4=()=>u(i4,{children:u(lu,{})}),ru="/";var Eu=[{label:"\u0413\u043B\u0430\u0432\u043D\u0430\u044F",path:`${ru}`,icon:u(Ou,{color:"primary"})},{label:"\u041F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u044B",path:`${ru}tasks`,icon:u(Ru,{color:"primary"})},{label:"\u0417\u0430\u0434\u0430\u0447\u0438",path:`${ru}works`,icon:u(Lu,{color:"primary"})},{label:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438",path:`${ru}settings`,icon:u(Nu,{color:"primary"})}];const vu="Pulsar",l4=({toggleOpen:n})=>{const e=j(),t=Eu.map(s=>u(_,{button:!0,onClick:()=>e(s.path,{replace:!0}),children:u(mu,{primary:s.label})},s.label));return u(Uu,{position:"fixed",children:u(cu,{maxWidth:"xl",children:r(Mu,{disableGutters:!0,children:[u(d,{variant:"h6",noWrap:!0,component:"h1",sx:Y.logoSm,children:vu}),u(p,{sx:Y.menu,children:u(U,{component:"nav",sx:Y.nav,children:t})}),u(p,{sx:Y.icon,children:u(fu,{size:"large","aria-label":"open menu","aria-controls":"menu-appbar","aria-haspopup":"true",color:"inherit",onClick:n,sx:Y.iconButton,children:u(_u,{})})}),u(d,{variant:"h6",noWrap:!0,component:"h1",sx:Y.logoXs,children:vu})]})})})},Y={logoSm:{mr:2,display:{xs:"none",sm:"flex"}},logoXs:{flexGrow:1,justifyContent:"flex-end",display:{xs:"flex",sm:"none"}},menu:{flexGrow:1,justifyContent:"flex-end",display:{xs:"none",sm:"flex"}},nav:{display:"flex",flexDirection:"row"},iconButton:{padding:"20px"},icon:{display:{xs:"flex",sm:"none"}}},c4=({open:n,toggleOpen:e})=>{const t=j(),s=i=>{t(i,{replace:!0}),e()},a=Eu.map(i=>r(_,{button:!0,onClick:()=>s(i.path),children:[u(Pu,{children:i.icon}),u(mu,{primary:i.label})]},i.label));return r(ju,{sx:wu.drawer,open:n,onClose:e,children:[r(p,{sx:{display:{xs:"flex",sm:"none"}},children:[u(d,{children:"Pulsar"}),u(fu,{size:"large","aria-label":"open menu","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:e,sx:wu.closeButton,children:u(Gu,{})})]}),u(U,{component:"nav",children:a})]})},wu={drawer:{width:300,"& .MuiDrawer-paper":{width:300,boxSizing:"border-box",top:"auto",padding:"10px 10px"}},closeButton:{color:"text.secondary"}},d4=n=>{const[e,t]=o.exports.useState(!!n);return[e,()=>{t(()=>!e)}]},p4=({children:n})=>{const[e,t]=d4(!1);return r(cu,{maxWidth:"100vw",disableGutters:!0,sx:Su.container,children:[u(l4,{toggleOpen:t}),r(cu,{sx:Su.content,disableGutters:!0,children:[u(c4,{open:e,toggleOpen:t}),n]})]})},Su={container:{display:"flex",flexDirection:"column",minHeight:"100vh"},content:{display:"flex",flexGrow:1,mt:8}},J=`${location.protocol}//${location.hostname}`;class h4{async fetch(e){return(await V.get(`${J}/${e}`)).data}async fetchById(e,t){return(await V.get(`${J}/${e}/${t}`)).data}async create(e,t){return(await V.post(`${J}/${e}`,t)).data}async remove(e,t){return(await V.delete(`${J}/${e}/${t}`)).data}async update(e,t){return(await V.put(`${J}/${e}/${t.id}`,t)).data}async backup(e){await V({url:`${J}/${e}`,method:"GET",responseType:"blob"}).then(t=>{const s=t.headers["content-type"],a=new Blob([t.data],{type:s,encoding:"UTF-8"}),i=document.createElement("a"),l=t.headers["content-disposition"].split("filename=")[1].replace(/"/g,"");i.href=window.URL.createObjectURL(a),i.download=l,i.click()})}async restore(e,t){const s={result:null,error:null};let a=null;try{if(a=JSON.parse(t),!a.settings)return s.error="\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E\u0435 \u0441\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u0435 \u0444\u0430\u0439\u043B\u0430.",s}catch(i){return s.error=i,s}return await V.post(`${J}/${e}`,a)}}var w=new h4;class m4{constructor(){R(this,"actionTypes",[]);R(this,"workTypes",[]);R(this,"statusTypes",[]);R(this,"WORK",{});R(this,"STATUS",{});R(this,"ACTION",{});su(this),this.fetch()}fill(e){this.actionTypes=e.actionTypes,this.workTypes=e.workTypes,this.statusTypes=e.statusTypes,this.WORK=e.WORK,this.STATUS=e.STATUS,this.ACTION=e.ACTION}async fetch(){const e=await w.fetch("api/dictonary");this.fill(e.result)}getStatus(e){return this.statusTypes.find(t=>t.id===e)}}const y=new m4;class f4{constructor(){R(this,"settingList",[]);R(this,"SETTING",{});R(this,"serverTime","");su(this)}setServerTime(e){this.serverTime=tu(e,"dd-MM-yyyy - HH:mm")}fill(e){this.settingList=e}fillSETTING(e){this.SETTING=e}async fetch(){const e=await w.fetch("api/settings");this.fill(e.settings.result),this.fillSETTING(e.SETTING),await w.fetch("api/settings/serverTime")}async update(e){await w.update("api/settings",e);const t=[...this.settingList],s=t.findIndex(a=>a.id===e.id);t[s]=g({},e),this.fill(t)}async updateServer(){setTimeout(()=>{window.close()},2e3),await w.fetch("api/settings/updateServer")}async backup(){await w.backup("api/settings/backup")}async restore(e){return setTimeout(()=>{window.close()},2e3),await w.restore("api/settings/restore",e)}async shutdown(){setTimeout(()=>{window.close()},2e3),await w.fetch("api/settings/shutdown")}async calibrateAzimuth(e){return await w.fetch(`api/works/calibrateAzimuth?time=${e}`)}async calibrateSlope(e){return await w.fetch(`api/works/calibrateSlope?time=${e}`)}}const v=new f4;class x4{constructor(){R(this,"taskList",[]);su(this)}fill(e){this.taskList=e}async fetch(){const e=await w.fetch("api/tasks");this.fill(e.result)}async fetchById(e){return(await w.fetchById("api/tasks",e)).result}async remove(e){const t=await w.remove("api/tasks",e.id),s=this.taskList.filter(a=>a.id!==e.id);return this.fill(s),t.result}async create(e){const s=(await w.create("api/tasks",e)).result;this.fill([...this.taskList,s])}async update(e){const t=await w.update("api/tasks",e);let s=this.taskList.findIndex(a=>a.id===e.id);return this.taskList[s]=g({},e),t.result}}const H=new x4;class C4{constructor(){R(this,"workList",[]);R(this,"currentWork",null);su(this)}fill(e){this.workList=e}fillCurrentWork(e){e.length>0?this.currentWork=e[0]:this.currentWork=null}async fetch(){const e=await w.fetch("api/works");this.fill(e.result)}async fetchCurrentWork(){const e=await w.fetch("api/works/currentWork");this.fillCurrentWork(e.result)}async create(e){const s=(await w.create("api/works",e)).result;this.fill([...this.workList,s])}async stopCurrent(){return await w.fetch("api/works/stopCurrent")}async remove(e){const t=await w.remove("api/works",e.id),s=this.workList.filter(a=>a.id!==e.id);return this.fill(s),t.result}}const T=new C4,y4=()=>{var i;o.exports.useEffect(()=>{T.fetchCurrentWork()},[]);const n=j(),e=o.exports.useCallback(()=>{n("/works/current-work")},[]),t=o.exports.useCallback(()=>{T.stopCurrent()},[]);let s=[];const a=(i=T.currentWork)==null?void 0:i.work;return a&&(s=a.details.filter(l=>l.status.id===y.STATUS.STATUS_RUN).map(l=>u(_,{children:l.type.name},l.id))),r(D,{children:[r(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:1,bgcolor:"#cdcdcd"},children:[u(d,{variant:"span",children:"\u0422\u0435\u043A\u0443\u0449\u0435\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435"}),s.length===0&&u(d,{variant:"span",children:"\u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442"}),s.length!==0&&u(U,{children:s})]}),r(p,{sx:{display:"flex",bgcolor:"#cdcdcd"},children:[u(f,{variant:"contained",color:"primary",onClick:e,sx:{m:1},children:"\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u0435\u0435"}),u(f,{variant:"contained",color:"primary",onClick:t,sx:{m:1},children:"\u041E\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C"})]})]})};var g4=I(y4);const b4=()=>{const n=T.workList.filter(e=>e.status.id===y.STATUS.STATUS_RUN).map(e=>u(_,{children:e.item.name},e.id));return r(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",bgcolor:"#cdcdcd",p:1,mb:2},children:[u(d,{variant:"span",children:"\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u0437\u0430\u0434\u0430\u0447\u0430 "}),n.length===0&&u(d,{variant:"span",children:"\u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442"}),n.length!==0&&u(U,{children:n})]})};var E4=I(b4);const v4=()=>{const n=T.workList.filter(e=>e.status.id===y.STATUS.STATUS_WAIT).map(e=>{const t=tu(e.startTime,"dd-MM-yyyy - HH:mm");return r(_,{sx:{flexWrap:"wrap",justifyContent:"space-between"},children:[u(p,{variant:"div",sx:{width:"70%"},children:e.item.name}),u(p,{variant:"div",sx:{color:"blue"},children:t})]},e.id)});return r(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",bgcolor:"#cdcdcd",p:1,my:2,flexWrap:"wrap"},children:[u(d,{variant:"span",children:"\u0417\u0430\u043F\u043B\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0435"}),n.length===0&&u(d,{variant:"span",children:"\u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044E\u0442"}),n.length!==0&&u(U,{sx:{width:"100%"},children:n})]})};var w4=I(v4);const S4=()=>(o.exports.useEffect(()=>{T.fetch()},[]),r(p,{sx:{borderWidth:"1px",borderStyle:"solid",borderColor:"black",borderRadius:"5px",minHeight:"98%",p:.5,m:.5},children:[u(d,{children:"\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E \u0437\u0430\u0434\u0430\u043D\u0438\u044F\u0445"}),u(w4,{}),u(E4,{}),u(g4,{})]})),uu=n=>{const{open:e,onCloseDialog:t,children:s}=n;return u(xu,{open:e,onClose:t,sx:{"& .MuiPaper-root":{width:{xs:"98%",sm:"50%"}}},children:s})},T4=({setting:n,onCancel:e,onSubmit:t})=>{const[s,a]=o.exports.useState(g({},n)),i=c=>{const C=c.target.value;a(N(g({},s),{value:C}))},l=()=>{const c=g({},s);return c.value=Number((+c.value).toFixed(3)),g({},c)};return r(D,{children:[u(X,{children:u(d,{children:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u0430"})}),u(Z,{children:u(p,{sx:{display:"flex",flexDirection:"column"},children:u(Q,{children:u(G,{autoFocus:!0,sx:{m:1},label:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435",type:"number",inputProps:{max:350,min:0,step:.1},value:s.value,onChange:i,InputLabelProps:{shrink:!0}})})})}),r(q,{children:[u(f,{onClick:e,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(f,{onClick:()=>t(l()),children:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})]})]})},Tu=({setting:n,onEdit:e,editable:t=!0})=>{const[s,a]=o.exports.useState(!1),i=()=>{a(!0)},l=()=>{a(!1)},c=C=>{e(g({},C)),l()};return r(D,{children:[r(_,{sx:{justifyContent:"space-between",wordWrap:"wrap",bgcolor:"#f9f9f9"},children:[u(d,{sx:{width:"40%"},children:n.name}),r(p,{sx:{width:"60%",display:"flex",justifyContent:"space-between"},children:[u(d,{sx:{width:"50%",display:"flex",justifyContent:"center",fontSize:"1.5rem",color:"blue"},children:n.value}),t&&u(f,{onClick:i,children:"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C"})]})]},n.id),u(uu,{open:s,onCloseDialog:l,children:u(T4,{onCancel:l,onSubmit:c,setting:n})})]})},D4=()=>{o.exports.useEffect(()=>{v.fetch()},[]);const n=v.settingList?v.settingList.filter(e=>e.id!==v.SETTING.SETTING_AZIMUTH_SPEED&&e.id!==v.SETTING.SETTING_SLOPE_SPEED).map(e=>u(Tu,{setting:e,editable:!1},e.id)):null;return r(p,{sx:{borderWidth:"1px",borderStyle:"solid",borderColor:"black",borderRadius:"5px",minHeight:"98%",p:.5,m:.5},children:[u(d,{children:"\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E\u0431 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0435"}),r(p,{sx:{display:"flex",justifyContent:"space-between",px:2,mt:2,color:"blue"},children:[u(d,{variant:"div",children:"\u0412\u0440\u0435\u043C\u044F \u0441\u0435\u0440\u0432\u0435\u0440\u0430"}),u(d,{variant:"div",children:v.serverTime})]}),u(U,{sx:{mb:2},children:n})]})};var k4=I(D4);const Du=()=>r(D,{children:[u(d,{sx:{color:"red",border:"2px solid red",borderRadius:1,fontWeight:"bold",width:"80%",m:"10px auto",p:1},children:"\u0412\u041D\u0418\u041C\u0410\u041D\u0418\u0415!!! \u041F\u0435\u0440\u0435\u0434 \u0440\u0430\u0431\u043E\u0442\u043E\u0439 \u043F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435 \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E\u0432\u0442\u044C \u0432\u044B\u0441\u0442\u0430\u0432\u043B\u0435\u043D\u043D\u043E\u0433\u043E \u0430\u0437\u0438\u043C\u0443\u0442\u0430 \u0438 \u043D\u0430\u043A\u043B\u043E\u043D\u0430!!!"}),r(p,{sx:{bgcolor:"#f9f9f9",p:1,minHeight:"85%",display:"flex",flexWrap:"wrap",justifyContent:"center"},children:[u(p,{sx:{padding:1,width:{xs:"100%",sm:"45%"},minHeight:"95%"},children:u(S4,{})}),u(p,{sx:{padding:1,width:{xs:"100%",sm:"45%"},minHeight:"95%"},children:u(k4,{})})]})]}),A4=()=>u(D,{children:u(lu,{})}),B4=()=>u(D,{children:u(lu,{})}),W4=({task:n,onSubmit:e,onCancel:t})=>{const s=o.exports.useMemo(()=>y.workTypes.find(m=>m.id===y.WORK.WORK_PROGRAMM),[]),a=o.exports.useMemo(()=>y.statusTypes.find(m=>m.id===y.STATUS.STATUS_RUN),[]),i=o.exports.useMemo(()=>({type:s,status:a,item:n,startTime:null,details:[]}),[]),[l,c]=o.exports.useState(i),[C,x]=o.exports.useState(a),[b,k]=o.exports.useState(tu(new Date,"yyyy-MM-dd'T'HH:mm",{locale:du})),F=m=>{const $=tu(m,"yyyy-MM-dd'T'HH:mm",{locale:du}),A=gu(bu($));k($),c(N(g({},l),{startTime:A}))},h=m=>{const $=m.target.value;let A=null;x($),$.id===y.STATUS.STATUS_WAIT&&(A=gu(bu(b))),c(N(g({},l),{status:$,startTime:A}))},S=o.exports.useMemo(()=>y.statusTypes.map(m=>(m.id===y.STATUS.STATUS_RUN||m.id===y.STATUS.STATUS_WAIT)&&u(Cu,{value:m,children:m.name},m.id)),[]);return r(D,{children:[u(X,{children:u(d,{children:"\u0417\u0430\u0434\u0430\u043D\u0438\u0435"})}),u(Z,{children:r(p,{sx:{display:"flex",flexDirection:"column"},children:[u(Q,{fullWidth:!0,sx:I4.gutters,children:u(yu,{autoFocus:!0,value:C,onChange:h,children:S})}),C.id===y.STATUS.STATUS_WAIT&&u(Q,{children:u(Hu,{value:b,onChange:F,renderInput:m=>u(G,g({},m))})})]})}),r(q,{children:[u(f,{onClick:t,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(f,{onClick:()=>e(l),children:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})]})]})},I4={gutters:{my:1}};var F4=I(W4);const $4=({task:n,onSelect:e,onRemove:t})=>{const[s,a]=o.exports.useState(!1),i=j(),l=()=>{a(!0)},c=()=>{a(!1)},C=async x=>{await T.create(x),a(!1),x.status.id===y.STATUS.STATUS_RUN&&i("/works/current-work")};return r(D,{children:[r(_,{sx:{color:"text.primary",mb:.5,p:.2,width:"auto"},children:[r(p,{sx:{display:"flex",bgcolor:"#ffffff",width:"80%",border:"1px solid #001e3c",borderRadius:"2px",cursor:"pointer",flexWrap:"wrap","&:hover":{bgcolor:"#f1f1f1",color:"text.secondary"},alignItems:"center"},onClick:()=>e(n.id),children:[u(d,{variant:"p",component:"span",sx:{width:{xs:"100%",sm:"40%"},padding:1},children:n.name}),u(d,{variant:"p",component:"span",sx:{padding:1,fontSize:"caption.fontSize"},children:n.description})]}),r(p,{sx:{display:"flex",flexWrap:{xs:"wrap",sm:"nowrap"},flexGrow:1,justifyContent:"center",ml:1},children:[u(f,{variant:"outlined",size:"small",sx:{mr:{xs:0,sm:.5},mb:{xs:.5,sm:0}},onClick:l,children:"\u0437\u0430\u043F\u0443\u0441\u043A"}),u(f,{variant:"outlined",size:"small",onClick:()=>t(n),children:"\u0443\u0434\u0430\u043B\u0438\u0442\u044C"})]})]}),u(uu,{open:s,onCloseDialog:c,children:u(F4,{onCancel:c,onSubmit:C,task:n})})]})};var O4=I($4);const pu=({open:n,children:e,onOk:t,onCancel:s})=>u(p,{sx:{display:"flex",justifyContent:"space-between",width:"80%",flexWrap:"wrap"},children:r(xu,{open:n,onClose:s,children:[u(X,{}),u(Z,{children:e}),r(q,{children:[u(f,{onClick:s,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(f,{onClick:t,children:"Ok"})]})]})}),R4=n=>{const[e,t]=o.exports.useState(!1),[s,a]=o.exports.useState("");return[e,s,l=>{t(l),a(l?n:"")}]},L4=({open:n,onAddTask:e,onCloseDialog:t})=>{const[s,a,i]=R4("\u0418\u043C\u044F \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C."),[l,c]=o.exports.useState(""),[C,x]=o.exports.useState(""),b=h=>{x(h.target.value)},k=h=>{const S=h.target.value;i(!S),c(h.target.value)},F=()=>{if(!l){i(!0);return}e({name:l,description:C})};return o.exports.useEffect(()=>{n&&(c(""),i(!1),x(""))},[n]),r(D,{children:[u(X,{children:u(d,{children:"\u041D\u043E\u0432\u0430\u044F \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0430"})}),u(Z,{children:r(p,{sx:{display:"flex",flexDirection:"column"},children:[u(G,{autoFocus:!0,error:s,label:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",value:l,helperText:a,variant:"filled",onChange:k,sx:{mb:1}}),u(G,{label:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",value:C,variant:"filled",multiline:!0,maxRows:4,onChange:b})]})}),r(q,{children:[u(f,{onClick:t,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(f,{onClick:F,children:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"})]})]})},N4=()=>{const n=j(),[e,t]=o.exports.useState(!1),[s,a]=o.exports.useState(!1),[i,l]=o.exports.useState(null),c=o.exports.useCallback(m=>{n(`/tasks/${m}`)},[]);o.exports.useEffect(()=>H.fetch(),[]);const C=o.exports.useCallback(()=>{t(!1)},[]),x=o.exports.useCallback(()=>{t(!0)},[]),b=m=>{l(m),a(!0)},k=()=>{i&&H.remove(i).then(()=>{l(null)}),a(!1)},F=()=>{l(null),a(!1)},h=o.exports.useCallback(m=>{H.create(N(g({},m),{actions:[]})),C()},[]),S=o.exports.useMemo(()=>H.taskList.map(m=>u(O4,{task:m,onSelect:c,onRemove:b},m.id)),[H.taskList]);return r(p,{sx:{bgcolor:"#f9f9f9",padding:1,minHeight:"98%"},children:[r(p,{sx:{display:"flex",justifyContent:"space-between",width:"80%",flexWrap:"wrap"},children:[u(d,{variant:"h5",children:"\u0421\u043F\u0438\u0441\u043E\u043A \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C"}),u(f,{variant:"contained",color:"primary",onClick:x,children:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"})]}),u(U,{children:S}),u(uu,{open:e,onCloseDialog:C,children:u(L4,{open:e,onAddTask:h,onCloseDialog:C})}),r(pu,{open:s,onOk:k,onCancel:F,children:[u(d,{sx:{mb:2},children:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u0443\u044E \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0443?"}),u(d,{align:"center",sx:{fontWeight:"bold"},children:i==null?void 0:i.name})]})]})};var U4=I(N4);const ku=(n,e="#f1f1f1")=>o.exports.useMemo(()=>{switch(n.id){case y.STATUS.STATUS_RUN:return"#ffffe6";case y.STATUS.STATUS_DONE:return"#e8ffe6";case y.STATUS.STATUS_EXPIRED:return"#ffe6e7";default:return e}},[n]),M4=({work:n,onRemove:e})=>{const t=ku(n.status),s=n.startTime?tu(n.startTime,"dd-MM-yyyy - HH:mm"):null,a=j(),i=n.status.id===y.STATUS.STATUS_RUN?"pointer":"default";return r(_,{sx:{color:"text.primary",mb:.5,p:.2,width:"auto"},children:[r(p,{sx:{display:"flex",width:"80%",border:"1px solid #001e3c",borderRadius:"2px",cursor:()=>i,flexWrap:"wrap",bgcolor:t},onClick:()=>{n.status.id===y.STATUS.STATUS_RUN&&a("/works/current-work")},children:[u(d,{variant:"p",component:"span",sx:{width:{xs:"100%",sm:"20%"},padding:1},children:n.status.name}),u(d,{variant:"p",component:"span",sx:{width:{xs:"100%",sm:"40%"},padding:1},children:n.item.name}),r(d,{variant:"p",component:"span",sx:{width:{xs:"100%",sm:"20%"},padding:1},children:[!!s&&s,!s&&"\u043D\u0435\u043C\u0435\u0434\u043B\u0435\u043D\u043D\u043E"]})]}),u(p,{sx:{display:"flex",flexWrap:{xs:"wrap",sm:"nowrap"},flexGrow:1,justifyContent:"center",ml:1},children:u(f,{variant:"outlined",size:"small",onClick:()=>e(n),children:"\u0443\u0434\u0430\u043B\u0438\u0442\u044C"})})]})};var _4=I(M4);const P4=()=>{var C,x;j();const[n,e]=o.exports.useState(!1),[t,s]=o.exports.useState(null);o.exports.useEffect(()=>T.fetch(),[]);const a=b=>{s(b),e(!0)},i=()=>{t&&T.remove(t).then(()=>{s(null)}),e(!1)},l=()=>{s(null),e(!1)},c=o.exports.useMemo(()=>T.workList.map(b=>u(_4,{work:b,onRemove:a},b.id)),[T.workList]);return r(p,{sx:{bgcolor:"#f9f9f9",padding:1,minHeight:"98%"},children:[u(p,{sx:{display:"flex",justifyContent:"space-between",width:"80%",flexWrap:"wrap"},children:u(d,{variant:"h5",children:"\u0421\u043F\u0438\u0441\u043E\u043A \u0443\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u043D\u044B\u0445 \u0437\u0430\u0434\u0430\u0447"})}),u(U,{children:c}),r(pu,{open:n,onOk:i,onCancel:l,children:[u(d,{sx:{mb:2},children:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u0443\u044E \u0437\u0430\u0434\u0430\u0447\u0443?"}),r(d,{align:"center",sx:{fontWeight:"bold"},children:[(C=t==null?void 0:t.status)==null?void 0:C.name," ",(x=t==null?void 0:t.item)==null?void 0:x.name]})]})]})};var j4=I(P4);const G4=({work:n})=>{const e=ku(n.status);let t="";switch(n.type.id){case y.ACTION.ACTION_AZIMUTH:case y.ACTION.ACTION_SLOPE:t=n.value1+" \u0433\u0440\u0430\u0434.";break;case y.ACTION.ACTION_WAIT:t=n.value1+" \u0441\u0435\u043A.";break;case y.ACTION.ACTION_SPARK:t=n.value2+" \u0441\u0435\u043A.";break}return u(D,{children:r(_,{sx:{justifyContent:"space-between",flexWrap:"wrap",bgcolor:e,mb:1},children:[u(d,{sx:{width:{xs:"100%",sm:"15%",md:"15%"},fontWeight:"bold"},children:n.type.name}),u(d,{sx:{width:{xs:"100%",sm:"15%",md:"15%"},textAlign:{xs:"left",sm:"center"}},children:t})," ",u(d,{sx:{width:{xs:"100%",sm:"20%"},textAlign:{xs:"left",sm:"right"},fontWeight:"bold"},children:n.status.name})]},n.id)})},H4=()=>{var s;const n=o.exports.useCallback(()=>{T.stopCurrent()},[]);o.exports.useEffect(()=>{T.fetchCurrentWork()},[]);let e=null;const t=(s=T.currentWork)==null?void 0:s.work;return t&&(e=t.details.map(a=>u(G4,{work:a},a.id))),r(D,{children:[r(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",bgcolor:"#cdcdcd",px:1},children:[u(d,{variant:"h6",children:"\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u0437\u0430\u0434\u0430\u0447\u0430"}),u(p,{children:u(f,{variant:"contained",color:"primary",onClick:n,sx:{m:1},children:"\u041E\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C"})})]}),!e&&u(p,{sx:{my:10,fontWeight:"bold",display:"flex",width:"100%",justifyContent:"center",alignItems:"center"},children:"\u041D\u0435\u0442 \u0442\u0435\u043A\u0443\u0449\u0435\u0439 \u0437\u0430\u0434\u0430\u0447\u0438"}),u(U,{children:e})]})};var z4=I(H4);const K4=({action:n,onRemove:e,onEdit:t})=>r(_,{sx:{color:"text.primary",mb:.5,p:.2,width:"auto"},children:[r(p,{sx:{display:"flex",bgcolor:"#ffffff",width:"80%",border:"1px solid #001e3c",borderRadius:"2px",flexWrap:"wrap",cursor:"pointer","&:hover":{bgcolor:"#f1f1f1",color:"text.secondary"}},onClick:()=>t(n),children:[u(d,{variant:"p",component:"span",sx:{width:{xs:"100%",sm:"40%"},padding:1},children:n.type.name}),r(d,{variant:"p",component:"span",sx:{padding:1},children:[n.type.id===1&&r(d,{children:["\u0430\u0437\u0438\u043C\u0443\u0442 ",u("span",{children:n.value1})," \u0433\u0440\u0430\u0434\u0443\u0441\u043E\u0432"]}),n.type.id===2&&r(d,{children:["\u043D\u0430\u043A\u043B\u043E\u043D ",u("span",{children:n.value1})," \u0433\u0440\u0430\u0434\u0443\u0441\u043E\u0432"]}),n.type.id===3&&r(d,{children:["\u043E\u0436\u0438\u0434\u0430\u043D\u0438\u0435 ",u("span",{children:n.value1})," \u0441\u0435\u043A"]}),n.type.id===4&&r(d,{children:["\u0440\u0430\u0437\u0440\u044F\u0434 \u043A\u043E\u043B-\u0432\u043E ",u("span",{children:n.value1})," \u0432\u0440\u0435\u043C\u044F\xA0",u("span",{children:n.value2})," \u0441\u0435\u043A \u0438\u043D\u0442\u0435\u0440\u0432\u0430\u043B\xA0",u("span",{children:n.value3})," \u0441\u0435\u043A"]})]})]}),u(p,{sx:{display:"flex",flexWrap:{xs:"wrap",sm:"nowrap"},flexGrow:1,justifyContent:"center",ml:1},children:u(f,{variant:"outlined",size:"small",onClick:()=>e(n),children:"\u0443\u0434\u0430\u043B\u0438\u0442\u044C"})})]});var V4=I(K4);const X4=({action:n,onSubmit:e,onCloseDialog:t})=>{const s=o.exports.useMemo(()=>({id:y.actionTypes[0].id,name:y.actionTypes[0].name}),[]),a=o.exports.useMemo(()=>({id:null,type:s,value1:0,value2:0,value3:0}),[]),[i,l]=o.exports.useState(n||a),[c,C]=o.exports.useState(()=>y.actionTypes.find(h=>h.id===i.type.id)),x=h=>{let S=h.target.value.replace(/-/g,""),m={};switch(h.target.dataset.source){case"value1":m={value1:S};break;case"value2":m={value2:S};break;case"value3":m={value3:S};break}l(()=>g(g({},i),m))},b=h=>{const S=h.target.value;C(S),l(N(g({},i),{type:{id:S.id,name:S.name},value1:0,value2:0,value3:0}))},k=o.exports.useMemo(()=>y.actionTypes.map(h=>u(Cu,{value:h,children:h.name},h.id)),[]),F=()=>{const h=g({},i);return h.value1=h.type.id===y.ACTION.ACTION_SPARK?Number(String(h.value1).split(".")[0]):Number((+h.value1).toFixed(1)),h.value2=Number((+h.value2).toFixed(1)),h.value3=Number((+h.value3).toFixed(1)),g({},h)};return r(D,{children:[u(X,{children:u(d,{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435"})}),u(Z,{children:r(p,{sx:{display:"flex",flexDirection:"column"},children:[u(Q,{fullWidth:!0,sx:au.gutters,children:u(yu,{autoFocus:!0,value:c,onChange:b,children:k})}),u(Q,{fullWidth:!0,children:u(G,{label:c.value1.label,value:i.value1,onChange:x,type:"number",inputProps:{"data-source":"value1",max:c.value1.max,min:c.value1.min,step:c.value1.step},sx:au.gutters,InputLabelProps:{shrink:!0}})}),c.id===y.ACTION.ACTION_SPARK&&u(G,{label:c.value2.label,value:i.value2,onChange:x,type:"number",inputProps:{"data-source":"value2",max:c.value2.max,min:c.value2.min,step:c.value2.step},sx:au.gutters,InputLabelProps:{shrink:!0}}),c.id===y.ACTION.ACTION_SPARK&&u(G,{label:c.value3.label,value:i.value3,onChange:x,type:"number",inputProps:{"data-source":"value3",max:c.value3.max,min:c.value3.min,step:c.value3.step},sx:au.gutters,InputLabelProps:{shrink:!0}})]})}),r(q,{children:[u(f,{onClick:t,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(f,{onClick:()=>e(F()),children:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})]})]})},au={gutters:{my:1}};var Z4=I(X4);const q4=()=>{var O;const n=zu(),e=j(),[t,s]=o.exports.useState(!1),[a,i]=o.exports.useState(null),[l,c]=o.exports.useState({}),[C,x]=o.exports.useState(!1),[b,k]=o.exports.useState(null),F=o.exports.useCallback(()=>{e("/tasks")},[]);o.exports.useEffect(()=>{H.fetchById(n.id).then(E=>c(E))},[]);const h=o.exports.useCallback(()=>{s(!1)},[]),S=o.exports.useCallback(E=>{i(E),s(!0)},[]),m=o.exports.useCallback(()=>{i(null),s(!0)},[]),$=E=>{k(E),x(!0)},A=()=>{if(b){const E=l.actions.filter(W=>b.id!==W.id),L=N(g({},l),{actions:E});c(L),H.update(L).then(()=>{k(null)})}x(!1)},K=()=>{k(null),x(!1)},iu=E=>{E.id||(E.id=Ku());const L=l.actions.findIndex(eu=>eu.id===E.id),W=[...l.actions];L===-1?W.push(E):W[L]=g({},E);const M=N(g({},l),{actions:[...W]});c(M),s(!1),H.update(M)},B=Array.isArray(l.actions)?l.actions.map(E=>u(V4,{action:E,onRemove:$,onEdit:S},E.id)):null;return r(p,{sx:{bgcolor:"#f9f9f9",padding:1,minHeight:"98%"},children:[r(p,{sx:{display:"flex",justifyContent:"space-between",width:"80%",flexWrap:"wrap"},children:[u(d,{variant:"h5",children:"\u0421\u043E\u0441\u0442\u0430\u0432 \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u044B"}),r(p,{children:[u(f,{variant:"contained",color:"primary",onClick:F,sx:{mr:1},children:"\u041A \u0441\u043F\u0438\u0441\u043A\u0443"}),u(f,{variant:"contained",color:"primary",onClick:m,children:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"})]})]}),u(p,{children:u(d,{variant:"h6",sx:{fontStyle:"italic",color:"blue",my:1},children:`\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435: ${l.name||""}`})}),B&&B.length<=0&&u(p,{sx:{my:10,fontWeight:"bold",display:"flex",width:"100%",justifyContent:"center",alignItems:"center"},children:"\u0421\u043F\u0438\u0441\u043E\u043A \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439 \u043F\u0443\u0441\u0442"}),u(U,{children:B}),u(uu,{open:t,onCloseDialog:h,children:u(Z4,{open:t,onCloseDialog:h,onSubmit:iu,action:a})}),r(pu,{open:C,onOk:A,onCancel:K,children:[u(d,{sx:{mb:2},children:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u043E\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435?"}),u(d,{align:"center",sx:{fontWeight:"bold"},children:(O=b==null?void 0:b.type)==null?void 0:O.name})]})]})};var J4=I(q4);const Q4=()=>{o.exports.useEffect(()=>{v.fetch()},[]);const n=t=>{v.update(g({},t))},e=v.settingList.map(t=>{let s=!0;return t.id===v.SETTING.SETTING_VERSION&&(s=!1),u(Tu,{setting:t,onEdit:n,editable:s},t.id)});return u(D,{children:u(U,{sx:{mb:2},children:e})})};var Y4=I(Q4);const ue=({openDialog:n,openConfirm:e,disableAll:t})=>r(D,{children:[u(f,{disabled:t,variant:"contained",color:"primary",onClick:()=>{e("update")},sx:{mr:1,mb:1},children:"\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u0430"}),u(f,{disabled:t,variant:"contained",color:"primary",onClick:()=>{e("shutdown")},sx:{mr:1,mb:1},children:"\u0412\u044B\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u043E"}),u(f,{disabled:t,variant:"contained",color:"primary",onClick:()=>{n("azimuth")},sx:{mr:1,mb:1},children:"\u041A\u0430\u043B\u0438\u0431\u0440\u043E\u0432\u043A\u0430 \u0430\u0437\u0438\u043C\u0443\u0442\u0430"}),u(f,{disabled:t,variant:"contained",color:"primary",onClick:()=>{n("slope")},sx:{mr:1,mb:1},children:"\u041A\u0430\u043B\u0438\u0431\u0440\u043E\u0432\u043A\u0430 \u043D\u0430\u043A\u043B\u043E\u043D\u0430"})]}),ee=[{description:'\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u043E \u043D\u0430 \u0430\u0437\u0438\u043C\u0443\u0442 0 \u0438 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 "\u0414\u0430\u043B\u0435\u0435".',time:0},{description:`\u041F\u043E\u0432\u043E\u0440\u043E\u0442 \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 5 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0430\u0437\u0438\u043C\u0443\u0442\u0430.`,time:5},{description:`\u041F\u043E\u0432\u043E\u0440\u043E\u0442 \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 10 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0430\u0437\u0438\u043C\u0443\u0442\u0430.`,time:10},{description:`\u041F\u043E\u0432\u043E\u0440\u043E\u0442 \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 15 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0430\u0437\u0438\u043C\u0443\u0442\u0430.`,time:15}],te=[{description:'\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435 \u043D\u0430\u043A\u043B\u043E\u043D \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0430 \u043D\u0430 0 \u0438 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 "\u0414\u0430\u043B\u0435\u0435".',time:0},{description:`\u041D\u0430\u043A\u043B\u043E\u043D \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 2 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0443\u0433\u043B\u0430 \u043D\u0430\u043A\u043B\u043E\u043D\u0430.`,time:2},{description:`\u041D\u0430\u043A\u043B\u043E\u043D \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 4 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0443\u0433\u043B\u0430 \u043D\u0430\u043A\u043B\u043E\u043D\u0430.`,time:4},{description:`\u041D\u0430\u043A\u043B\u043E\u043D \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 6 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0443\u0433\u043B\u0430 \u043D\u0430\u043A\u043B\u043E\u043D\u0430.`,time:6}],ne=({onCancel:n,mode:e})=>{const[t,s]=o.exports.useState(0),[a,i]=o.exports.useState(!1);let l="",c=[];switch(e){case"azimuth":l="\u041A\u0430\u043B\u0438\u0431\u0440\u043E\u0432\u043A\u0430 \u0430\u0437\u0438\u043C\u0443\u0442\u0430",c=ee;break;case"slope":l="\u041A\u0430\u043B\u0438\u0431\u0440\u043E\u0432\u043A\u0430 \u043D\u0430\u043A\u043B\u043E\u043D\u0430",c=te;break}const C=c.length,[x,b]=o.exports.useState(new Array(C).fill(0)),[k,F]=o.exports.useState(new Array(C).fill(0)),h=(B,O=3)=>Number(B.toFixed(O)),S=()=>{T.stopCurrent(),i(!0);const B=c[t].time;let O=()=>{};switch(e){case"azimuth":O=v.calibrateAzimuth;break;case"slope":O=v.calibrateSlope;break}O(B)},m=()=>{T.stopCurrent(),n()},$=B=>{const O=+B.target.value,E=[...x],L=[...k];E[t]=O;let W=h((O-E[t-1])/c[t].time);W=W<=0?0:W,L[t]=W,b(E),F(L)},A=()=>{T.stopCurrent();const B=[0];for(let M=1;M<c.length;M++){const eu=h((x[M]-x[M-1])/c[M].time);B.push(eu)}const O=B.reduce((M,eu)=>M+eu),E=h(O/(c.length-1));let L={},W={};switch(e){case"azimuth":L=N(g({},v.settingList[0]),{value:E}),W=N(g({},v.settingList[2]),{value:x[x.length-1]});break;case"slope":L=N(g({},v.settingList[1]),{value:E}),W=N(g({},v.settingList[3]),{value:x[x.length-1]});break}E>0&&(v.update(L),v.update(W)),n()},K=()=>{s(B=>B+1),i(!1)},iu=()=>{s(B=>B-1),i(!1)};return r(D,{children:[u(X,{children:u(d,{children:l})}),u(Z,{children:r(p,{sx:{display:"flex",flexDirection:"column"},children:[u(p,{sx:{p:2},children:c[t].description}),t!==0&&r(Q,{children:[u(f,{onClick:S,variant:"contained",color:"primary",disabled:a,sx:{width:{md:"50%",xl:"25%"},mb:1,ml:1},children:"\u0421\u0442\u0430\u0440\u0442"}),u(G,{sx:{m:1},label:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435",type:"number",inputProps:{max:350,min:0,step:.1},value:x[t],onChange:$,InputLabelProps:{shrink:!0}}),r(d,{sx:{mx:1},children:["\u0421\u043A\u043E\u0440\u043E\u0441\u0442\u044C: ",k[t]]})]}),u(Vu,{sx:{justifySelf:"flex-end"},variant:"text",steps:C,position:"static",activeStep:t,nextButton:r(f,{size:"small",onClick:K,disabled:t===C-1,children:["\u0414\u0430\u043B\u0435\u0435",u(Xu,{})]}),backButton:r(f,{size:"small",onClick:iu,disabled:t===0,children:[u(Zu,{}),"\u041D\u0430\u0437\u0430\u0434"]})})]})}),r(q,{children:[u(f,{onClick:m,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(f,{onClick:A,children:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})]})]})},se=({disableAll:n})=>{const e=o.exports.useRef();return u(D,{children:r(p,{sx:{display:"flex",width:"100%",flexWrap:"wrap"},children:[u(f,{disabled:n,variant:"contained",color:"primary",onClick:()=>{v.backup()},sx:{mr:1,mb:1},children:"\u0420\u0435\u0437\u0435\u0440\u0432\u043D\u0430\u044F \u043A\u043E\u043F\u0438\u044F \u0411\u0414"}),u(p,{children:r("label",{htmlFor:"upload",children:[u("input",{ref:e,style:{display:"none"},id:"upload",name:"upload",type:"file",onInput:a=>{var i=new FileReader;i.readAsText(a.target.files[0]),i.onloadend=function(l){v.restore(l.target.result).then(c=>{console.log(c)})}}}),u(f,{disabled:n,variant:"contained",color:"primary",component:"span",sx:{mr:1,mb:1},children:"\u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u0411\u0414"})]})})]})})},re=()=>{const[n,e]=o.exports.useState(!1),[t,s]=o.exports.useState(!1),[a,i]=o.exports.useState("azimuth"),[l,c]=o.exports.useState(""),[C,x]=o.exports.useState(""),[b,k]=o.exports.useState(!1),F=A=>{i(A),e(!0)},h=A=>{c(A);let K="";switch(A){case"update":K=`\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u0437\u0430\u0439\u043C\u0435\u0442 3-5 \u043C\u0438\u043D\u0443\u0442.
                   \u0412 \u044D\u0442\u043E \u0432\u0440\u0435\u043C\u044F \u0441\u0435\u0440\u0432\u0435\u0440 \u0431\u0443\u0434\u0435\u0442 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D.
                   \u041D\u0435 \u043E\u0442\u043A\u043B\u044E\u0447\u0430\u0439\u0442\u0435 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u043E \u043E\u0442 \u043F\u0438\u0442\u0430\u043D\u0438\u044F.

                   \u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C?
        `;break;case"shutdown":K=`\u0412\u044B\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0441\u0435\u0440\u0432\u0435\u0440?
        `;break}x(()=>K),s(!0),k(!0)},S=()=>{let A=()=>{};switch(l){case"update":A=v.updateServer;break;case"shutdown":A=v.shutdown;break}A(),s(!1)},m=()=>{e(!1)},$=()=>{s(!1),k(!1)};return r(D,{children:[u(d,{variant:"h6",children:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438"}),u(Y4,{}),u(ue,{openDialog:F,openConfirm:h,disableAll:b}),u(se,{disableAll:b}),u(uu,{open:n,onCloseDialog:m,children:u(ne,{onCancel:m,mode:a})}),r(uu,{open:t,onCloseDialog:$,children:[u(X,{children:u(d,{children:"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F"})}),u(Z,{children:C}),r(q,{children:[u(f,{onClick:$,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(f,{onClick:S,children:"Ok"})]})]})]})},z="/",ae=({routes:n})=>u(D,{children:u(qu,{children:u(p4,{children:u(Ju,{children:r(P,{path:`${z}`,element:u(o4,{}),children:[u(P,{path:`${z}`,element:u(Du,{})}),r(P,{path:`${z}tasks`,element:u(A4,{}),children:[u(P,{path:`${z}tasks`,element:u(U4,{})}),u(P,{path:`${z}tasks:id`,element:u(J4,{})})]}),r(P,{path:`${z}works`,element:u(B4,{}),children:[u(P,{path:`${z}works`,element:u(j4,{})}),u(P,{path:"/works/current-work",element:u(z4,{})})]}),u(P,{path:`${z}settings`,element:u(re,{})}),u(P,{path:"*",element:u(Du,{})})]})})})})});const nu=Qu(`ws://${location.hostname}`);nu.on("connect",()=>{console.log("socket ",nu.connected)});nu.on("workStatusUpdate",n=>{T.fetch(),T.fetchCurrentWork()});nu.on("serverTime",n=>{v.setServerTime(+n)});nu.on("settingsUpdate",n=>{v.fetch()});const ie=Yu({palette:{primary:{main:"#1976d2"},bgGray:{main:"#f9f9f9"}}},u4);e4.render(u(t4.StrictMode,{children:u(n4,{theme:ie,children:u(s4,{dateAdapter:r4,locale:du,children:u(ae,{})})})}),document.getElementById("root"));
