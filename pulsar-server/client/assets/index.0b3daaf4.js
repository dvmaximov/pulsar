var Le=Object.defineProperty,Fe=Object.defineProperties;var Oe=Object.getOwnPropertyDescriptors;var ye=Object.getOwnPropertySymbols;var Re=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable;var he=(s,e,t)=>e in s?Le(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,y=(s,e)=>{for(var t in e||(e={}))Re.call(e,t)&&he(s,t,e[t]);if(ye)for(var t of ye(e))Ue.call(e,t)&&he(s,t,e[t]);return s},D=(s,e)=>Fe(s,Oe(e));var S=(s,e,t)=>(he(s,typeof e!="symbol"?e+"":e,t),t);import{s as Ne,j as u,O as me,d as Me,a as _e,b as Pe,c as ze,u as V,L as M,e as Ce,A as Ge,C as fe,f as r,T as je,g as d,B as h,h as R,I as ge,i as He,k as Ve,D as Ke,l as Xe,r as o,m as w,n as ie,o as ee,p as F,q as f,t as Te,F as A,v as X,w as Z,x as q,y as z,z as J,E as xe,M as ke,S as we,G as Ze,H as Se,J as Ee,K as qe,N as Je,P as Qe,Q as Ye,R as eu,U as uu,V as tu,W as _,X as su,Y as nu,Z as ru,_ as iu,$ as au,a0 as ou,a1 as lu,a2 as cu}from"./vendor.32e403ff.js";const du=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerpolicy&&(i.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?i.credentials="include":a.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}};du();const pu=Ne("main")({flexGrow:1,margin:10}),hu=()=>u(pu,{children:u(me,{})}),ae="/";var be=[{label:"\u0413\u043B\u0430\u0432\u043D\u0430\u044F",path:`${ae}`,icon:u(Me,{color:"primary"})},{label:"\u041F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u044B",path:`${ae}tasks`,icon:u(_e,{color:"primary"})},{label:"\u0417\u0430\u0434\u0430\u0447\u0438",path:`${ae}works`,icon:u(Pe,{color:"primary"})},{label:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438",path:`${ae}settings`,icon:u(ze,{color:"primary"})}];const De="Pulsar",mu=({toggleOpen:s})=>{const e=V(),t=be.map(n=>u(M,{button:!0,onClick:()=>e(n.path,{replace:!0}),children:u(Ce,{primary:n.label})},n.label));return u(Ge,{position:"fixed",children:u(fe,{maxWidth:"xl",children:r(je,{disableGutters:!0,children:[u(d,{variant:"h6",noWrap:!0,component:"h1",sx:Q.logoSm,children:De}),u(h,{sx:Q.menu,children:u(R,{component:"nav",sx:Q.nav,children:t})}),u(h,{sx:Q.icon,children:u(ge,{size:"large","aria-label":"open menu","aria-controls":"menu-appbar","aria-haspopup":"true",color:"inherit",onClick:s,sx:Q.iconButton,children:u(He,{})})}),u(d,{variant:"h6",noWrap:!0,component:"h1",sx:Q.logoXs,children:De})]})})})},Q={logoSm:{mr:2,display:{xs:"none",sm:"flex"}},logoXs:{flexGrow:1,justifyContent:"flex-end",display:{xs:"flex",sm:"none"}},menu:{flexGrow:1,justifyContent:"flex-end",display:{xs:"none",sm:"flex"}},nav:{display:"flex",flexDirection:"row"},iconButton:{padding:"20px"},icon:{display:{xs:"flex",sm:"none"}}},fu=({open:s,toggleOpen:e})=>{const t=V(),n=i=>{t(i,{replace:!0}),e()},a=be.map(i=>r(M,{button:!0,onClick:()=>n(i.path),children:[u(Ve,{children:i.icon}),u(Ce,{primary:i.label})]},i.label));return r(Ke,{sx:Ae.drawer,open:s,onClose:e,children:[r(h,{sx:{display:{xs:"flex",sm:"none"}},children:[u(d,{children:"Pulsar"}),u(ge,{size:"large","aria-label":"open menu","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:e,sx:Ae.closeButton,children:u(Xe,{})})]}),u(R,{component:"nav",children:a})]})},Ae={drawer:{width:300,"& .MuiDrawer-paper":{width:300,boxSizing:"border-box",top:"auto",padding:"10px 10px"}},closeButton:{color:"text.secondary"}},xu=s=>{const[e,t]=o.exports.useState(!!s);return[e,()=>{t(()=>!e)}]},vu=({children:s})=>{const[e,t]=xu(!1);return r(fe,{maxWidth:"100vw",disableGutters:!0,sx:We.container,children:[u(mu,{toggleOpen:t}),r(fe,{sx:We.content,disableGutters:!0,children:[u(fu,{open:e,toggleOpen:t}),s]})]})},We={container:{display:"flex",flexDirection:"column",minHeight:"100vh"},content:{display:"flex",flexGrow:1,mt:8}},yu=`${location.protocol}//${location.hostname}`;class Cu{async fetch(){return(await w.get(`${yu}/dictonary`)).data}}var gu=new Cu;const Tu=gu;class ku{constructor(){S(this,"actionTypes",[]);S(this,"workTypes",[]);S(this,"statusTypes",[]);S(this,"WORK",{});S(this,"STATUS",{});S(this,"ACTION",{});ie(this),this.fetch()}fill(e){this.actionTypes=e.actionTypes,this.workTypes=e.workTypes,this.statusTypes=e.statusTypes,this.WORK=e.WORK,this.STATUS=e.STATUS,this.ACTION=e.ACTION}async fetch(){const e=await Tu.fetch();this.fill(e)}getStatus(e){return this.statusTypes.find(t=>t.id===e)}}const x=new ku,ue=`${location.protocol}//${location.hostname}`;class wu{async fetch(){return(await w.get(`${ue}/settings`)).data}async getServerTime(){return(await w.get(`${ue}/settings/serverTime`)).data}async update(e){return await w.put(`${ue}/settings/${e.id}`,e)}async updateServer(){setTimeout(()=>{window.close()},2e3),await w.get(`${ue}/settings/updateServer`)}async shutdown(){setTimeout(()=>{window.close()},2e3),await w.get(`${ue}/settings/shutdown`)}}var Su=new wu;const te=Su;class Eu{constructor(){S(this,"settingList",[]);S(this,"SETTING",{});S(this,"serverTime","");ie(this)}setServerTime(e){this.serverTime=ee(e,"dd-MM-yyyy - HH:mm")}fill(e){this.settingList=e}fillSETTING(e){this.SETTING=e}async fetch(){const e=await te.fetch();this.fill(e.settings),this.fillSETTING(e.SETTING),await te.getServerTime()}async update(e){await te.update(e);const t=[...this.settingList],n=t.findIndex(a=>a.id===e.id);t[n]=y({},e),this.fill(t)}async updateServer(){await te.updateServer()}async shutdown(){await te.shutdown()}}const E=new Eu,se=`${location.protocol}//${location.hostname}`;class bu{async fetch(){return(await w.get(`${se}/tasks`)).data}async fetchById(e){return(await w.get(`${se}/tasks/${e}`)).data}async create(e){return(await w.post(`${se}/tasks`,e)).data}async remove(e){return(await w.delete(`${se}/tasks/${e}`)).data}async update(e){return await w.put(`${se}/tasks/${e.id}`,e)}}var Du=new bu;const ne=Du;class Au{constructor(){S(this,"taskList",[]);ie(this)}fill(e){this.taskList=e}async remove(e){const t=await ne.remove(e.id);if(t.removed===1){const n=this.taskList.filter(a=>a.id!==e.id);this.fill(n)}return t.removed}async create(e){const t=await ne.create(e);this.fill([...this.taskList,t])}async update(e){await ne.update(e);let t=this.taskList.findIndex(n=>n.id===e.id);this.taskList[t]=y({},e)}async fetch(){this.fill(await ne.fetch())}async fetchById(e){return await ne.fetchById(e)}}const G=new Au,j=`${location.protocol}//${location.hostname}`;class Wu{async fetch(){return(await w.get(`${j}/works`)).data}async fetchCurrentWork(){return(await w.get(`${j}/works/currentWork`)).data}async create(e){return(await w.post(`${j}/works`,e)).data}async remove(e){return(await w.delete(`${j}/works/${e}`)).data}async stopCurrent(e){return await w.get(`${j}/works/stopCurrent`)}async update(e){return await w.put(`${j}/works/${e.id}`,e)}async calibrateAzimuth(e){await w.get(`${j}/works/calibrateAzimuth?time=${e}`)}async calibrateSlope(e){await w.get(`${j}/works/calibrateSlope?time=${e}`)}}var Bu=new Wu;const Be=[{id:1,type:{id:1,name:"\u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0430"},status:{id:1,name:"\u043E\u0436\u0438\u0434\u0430\u043D\u0438\u0435"},item:{id:2,name:"\u0412\u0442\u043E\u0440\u0430\u044F \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0430",description:"\u041A\u0440\u0430\u0442\u043A\u043E\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0432\u0442\u043E\u0440\u043E\u0439 \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u044B",actions:[{id:1,type:{id:1,name:"\u0443\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0430 \u0430\u0437\u0438\u043C\u0443\u0442\u0430"},value1:120.9,value2:0,value3:0},{id:2,type:{id:3,name:"\u043E\u0436\u0438\u0434\u0430\u043D\u0438\u0435"},value1:200,value2:0,value3:0},{id:3,type:{id:4,name:"\u0440\u0430\u0437\u0440\u044F\u0434"},value1:3,value2:2.5,value3:5}]},startTime:1645191e6,details:[]},{id:2,type:{id:1,name:"\u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0430"},status:{id:1,name:"\u043E\u0436\u0438\u0434\u0430\u043D\u0438\u0435"},item:{id:2,name:"\u0412\u0442\u043E\u0440\u0430\u044F \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0430",description:"\u041A\u0440\u0430\u0442\u043A\u043E\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0432\u0442\u043E\u0440\u043E\u0439 \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u044B",actions:[{id:1,type:{id:1,name:"\u0443\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0430 \u0430\u0437\u0438\u043C\u0443\u0442\u0430"},value1:120.9,value2:0,value3:0},{id:2,type:{id:3,name:"\u043E\u0436\u0438\u0434\u0430\u043D\u0438\u0435"},value1:200,value2:0,value3:0},{id:3,type:{id:4,name:"\u0440\u0430\u0437\u0440\u044F\u0434"},value1:3,value2:2.5,value3:5}]},startTime:16457166e5,details:[]}];class $u{constructor(){S(this,"currentWork",null);S(this,"updateWork",null)}setUpdaters(e){this.updateWork=e}createCurrentWork(e){}async startWork(e){this.currentWork=e;const t=await x.getStatus(x.STATUS.STATUS_RUN);this.currentWork=D(y({},this.currentWork),{status:t}),await this.updateWork(this.currentWork),console.log("status ",x.STATUS.STATUS_RUN)}async stopWork(){const e=await x.getStatus(x.STATUS.STATUS_DONE);this.currentWork=D(y({},this.currentWork),{status:e}),await this.updateWork(this.currentWork),this.currentWork=null,console.log("stop")}}var oe=new $u;let $e=Be.length+1;class Iu{constructor(){S(this,"works",Be);S(this,"timers",[]);S(this,"update",async e=>{const t=this.works.findIndex(n=>n.id===e.id);this.works[t]=y({},e)});oe.setUpdaters(this.update),this.fillTimers()}createTimer(e){const t=new Date().getTime(),n=e.startTime;if(!n)return null;const a=n-t,i=a<0?null:setTimeout(()=>{console.log("timer run",e.id),oe.startWork(e),this.removeTimer(e.id),clearTimeout(i)},a);return i}removeTimer(e){const t=this.timers.find(n=>n.workId===e);t&&(clearTimeout(t),this.timers=this.timers.filter(n=>n.workId===e))}fillTimers(){this.timers.forEach(e=>clearTimeout(e.timer)),this.timers=[],this.works.forEach(e=>{const t=this.createTimer(e);t&&this.timers.push({timerId:t,workId:e.id})})}async fetch(){return this.works}async create(e){$e++;const t=y({id:$e},e);return this.works.push(t),this.createTimer(t)||oe.startWork(t),t}async remove(e){return this.works=this.works.filter(t=>t.id!==e),oe.stopWork(),this.removeTimer(e),{removed:1,error:""}}}new Iu;const K=Bu;class Lu{constructor(){S(this,"workList",[]);S(this,"currentWork",null);ie(this)}fill(e){this.workList=e}fillCurrentWork(e){e.length>0?this.currentWork=e[0]:this.currentWork=null}async fetch(){const e=await K.fetch();this.fill(e)}async fetchCurrentWork(){const e=await K.fetchCurrentWork();this.fillCurrentWork(e)}async create(e){const t=await K.create(e);this.fill([...this.workList,t])}async stopCurrent(e){return await K.stopCurrent()}async calibrateAzimuth(e){return await K.calibrateAzimuth(e)}async calibrateSlope(e){return await K.calibrateSlope(e)}async remove(e){const t=await K.remove(e.id);if(t.removed===1){const n=this.workList.filter(a=>a.id!==e.id);this.fill(n)}return t.removed}}const k=new Lu,Fu=()=>{var c;o.exports.useEffect(()=>{k.fetch()},[]);const s=V(),e=o.exports.useCallback(()=>{s("/works/current-work")},[]),t=o.exports.useCallback(()=>{k.stopCurrent()},[]),n=k.workList.filter(p=>p.status.id===x.STATUS.STATUS_WAIT).map(p=>r(M,{children:[p.item.name," ",ee(new Date(p.startTime),"dd-MM-yyyy - HH:mm")]},p.id)),a=k.workList.filter(p=>p.status.id===x.STATUS.STATUS_RUN).map(p=>u(M,{children:p.item.name},p.id));let i=[];const l=(c=k.currentWork)==null?void 0:c.work;return l&&(i=l.details.filter(p=>p.status.id===x.STATUS.STATUS_RUN).map(p=>u(M,{children:p.type.name},p.id))),r(h,{sx:{borderWidth:"1px",borderStyle:"solid",borderColor:"black",borderRadius:"5px",minHeight:"98%",p:.5,m:.5},children:[u(d,{children:"\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E \u0437\u0430\u0434\u0430\u043D\u0438\u044F\u0445"}),r(h,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",bgcolor:"#cdcdcd",p:1,my:2,flexWrap:"wrap"},children:[u(d,{variant:"span",children:"\u0417\u0430\u043F\u043B\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0435"}),n.length===0&&u(d,{variant:"span",children:"\u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044E\u0442"}),n.length!==0&&u(R,{children:n})]}),r(h,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",bgcolor:"#cdcdcd",p:1,mb:2},children:[u(d,{variant:"span",children:"\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u0437\u0430\u0434\u0430\u0447\u0430 "}),a.length===0&&u(d,{variant:"span",children:"\u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442"}),a.length!==0&&u(R,{children:a})]}),r(h,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:1,bgcolor:"#cdcdcd"},children:[u(d,{variant:"span",children:"\u0422\u0435\u043A\u0443\u0449\u0435\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435"}),i.length===0&&u(d,{variant:"span",children:"\u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442"}),i.length!==0&&u(R,{children:i})]}),r(h,{sx:{display:"flex",bgcolor:"#cdcdcd"},children:[u(f,{variant:"contained",color:"primary",onClick:e,sx:{m:1},children:"\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u0435\u0435"}),u(f,{variant:"contained",color:"primary",onClick:t,sx:{m:1},children:"\u041E\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C"})]})]})};var Ou=F(Fu);const re=s=>{const{open:e,onCloseDialog:t,children:n}=s;return u(Te,{open:e,onClose:t,sx:{"& .MuiPaper-root":{width:{xs:"98%",sm:"50%"}}},children:n})},Ru=({setting:s,onCancel:e,onSubmit:t})=>{const[n,a]=o.exports.useState(y({},s)),i=l=>{const c=+l.target.value;a(D(y({},n),{value:c}))};return r(A,{children:[u(X,{children:u(d,{children:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u0430"})}),u(Z,{children:u(h,{sx:{display:"flex",flexDirection:"column"},children:u(q,{children:u(z,{autoFocus:!0,sx:{m:1},label:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435",type:"number",inputProps:{max:350,min:0,step:.1},value:n.value,onChange:i,InputLabelProps:{shrink:!0}})})})}),r(J,{children:[u(f,{onClick:e,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(f,{onClick:()=>t(n),children:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})]})]})},Ie=({setting:s,onEdit:e,editable:t=!0})=>{const[n,a]=o.exports.useState(!1),i=()=>{a(!0)},l=()=>{a(!1)},c=p=>{e(y({},p)),l()};return r(A,{children:[r(M,{sx:{justifyContent:"space-between",wordWrap:"wrap",bgcolor:"#f9f9f9"},children:[u(d,{sx:{width:"40%"},children:s.name}),r(h,{sx:{width:"60%",display:"flex",justifyContent:"space-between"},children:[u(d,{sx:{width:"50%",display:"flex",justifyContent:"center",fontSize:"1.5rem",color:"blue"},children:s.value}),t&&u(f,{onClick:i,children:"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C"})]})]},s.id),u(re,{open:n,onCloseDialog:l,children:u(Ru,{onCancel:l,onSubmit:c,setting:s})})]})},Uu=()=>{o.exports.useEffect(()=>{E.fetch()},[]);const s=E.settingList.filter(e=>e.id!==E.SETTING.SETTING_AZIMUTH_SPEED&&e.id!==E.SETTING.SETTING_SLOPE_SPEED).map(e=>u(Ie,{setting:e,editable:!1},e.id));return r(h,{sx:{borderWidth:"1px",borderStyle:"solid",borderColor:"black",borderRadius:"5px",minHeight:"98%",p:.5,m:.5},children:[u(d,{children:"\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E\u0431 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0435"}),r(h,{sx:{display:"flex",justifyContent:"space-between",px:2,mt:2,color:"blue"},children:[u(d,{variant:"div",children:"\u0412\u0440\u0435\u043C\u044F \u0441\u0435\u0440\u0432\u0435\u0440\u0430"}),u(d,{variant:"div",children:E.serverTime})]}),u(R,{sx:{mb:2},children:s})]})};var Nu=F(Uu);const Mu=()=>r(A,{children:[u(d,{sx:{color:"red",border:"2px solid red",borderRadius:1,fontWeight:"bold",width:"80%",m:"10px auto",p:1},children:"\u0412\u041D\u0418\u041C\u0410\u041D\u0418\u0415!!! \u041F\u0435\u0440\u0435\u0434 \u0440\u0430\u0431\u043E\u0442\u043E\u0439 \u043F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435 \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E\u0432\u0442\u044C \u0432\u044B\u0441\u0442\u0430\u0432\u043B\u0435\u043D\u043D\u043E\u0433\u043E \u0430\u0437\u0438\u043C\u0443\u0442\u0430 \u0438 \u043D\u0430\u043A\u043B\u043E\u043D\u0430!!!"}),r(h,{sx:{bgcolor:"#f9f9f9",p:1,minHeight:"85%",display:"flex",flexWrap:"wrap",justifyContent:"center"},children:[u(h,{sx:{padding:1,width:{xs:"100%",sm:"45%"},minHeight:"95%"},children:u(Ou,{})}),u(h,{sx:{padding:1,width:{xs:"100%",sm:"45%"},minHeight:"95%"},children:u(Nu,{})})]})]}),_u=()=>u(A,{children:u(me,{})}),Pu=()=>u(A,{children:u(me,{})}),zu=({task:s,onSubmit:e,onCancel:t})=>{const n=o.exports.useMemo(()=>x.workTypes.find(m=>m.id===x.WORK.WORK_PROGRAMM),[]),a=o.exports.useMemo(()=>x.statusTypes.find(m=>m.id===x.STATUS.STATUS_RUN),[]),i=o.exports.useMemo(()=>({type:n,status:a,item:s,startTime:null,details:[]}),[]),[l,c]=o.exports.useState(i),[p,v]=o.exports.useState(a),[T,W]=o.exports.useState(ee(new Date,"yyyy-MM-dd'T'HH:mm",{locale:xe})),O=m=>{const U=ee(m,"yyyy-MM-dd'T'HH:mm",{locale:xe}),P=Se(Ee(U));W(U),c(D(y({},l),{startTime:P}))},b=m=>{const U=m.target.value;let P=null;v(U),U.id===x.STATUS.STATUS_WAIT&&(P=Se(Ee(T))),c(D(y({},l),{status:U,startTime:P}))},g=o.exports.useMemo(()=>x.statusTypes.map(m=>(m.id===x.STATUS.STATUS_RUN||m.id===x.STATUS.STATUS_WAIT)&&u(ke,{value:m,children:m.name},m.id)),[]);return r(A,{children:[u(X,{children:u(d,{children:"\u0417\u0430\u0434\u0430\u043D\u0438\u0435"})}),u(Z,{children:r(h,{sx:{display:"flex",flexDirection:"column"},children:[u(q,{fullWidth:!0,sx:Gu.gutters,children:u(we,{autoFocus:!0,value:p,onChange:b,children:g})}),p.id===x.STATUS.STATUS_WAIT&&u(q,{children:u(Ze,{value:T,onChange:O,renderInput:m=>u(z,y({},m))})})]})}),r(J,{children:[u(f,{onClick:t,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(f,{onClick:()=>e(l),children:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})]})]})},Gu={gutters:{my:1}};var ju=F(zu);const Hu=({task:s,onSelect:e,onRemove:t})=>{const[n,a]=o.exports.useState(!1),i=V(),l=()=>{a(!0)},c=()=>{a(!1)},p=async v=>{await k.create(v),a(!1),v.status.id===x.STATUS.STATUS_RUN&&i("/works/current-work")};return r(A,{children:[r(M,{sx:{color:"text.primary",mb:.5,p:.2,width:"auto"},children:[r(h,{sx:{display:"flex",bgcolor:"#ffffff",width:"80%",border:"1px solid #001e3c",borderRadius:"2px",cursor:"pointer",flexWrap:"wrap","&:hover":{bgcolor:"#f1f1f1",color:"text.secondary"},alignItems:"center"},onClick:()=>e(s.id),children:[u(d,{variant:"p",component:"span",sx:{width:{xs:"100%",sm:"40%"},padding:1},children:s.name}),u(d,{variant:"p",component:"span",sx:{padding:1,fontSize:"caption.fontSize"},children:s.description})]}),r(h,{sx:{display:"flex",flexWrap:{xs:"wrap",sm:"nowrap"},flexGrow:1,justifyContent:"center",ml:1},children:[u(f,{variant:"outlined",size:"small",sx:{mr:{xs:0,sm:.5},mb:{xs:.5,sm:0}},onClick:l,children:"\u0437\u0430\u043F\u0443\u0441\u043A"}),u(f,{variant:"outlined",size:"small",onClick:()=>t(s),children:"\u0443\u0434\u0430\u043B\u0438\u0442\u044C"})]})]}),u(re,{open:n,onCloseDialog:c,children:u(ju,{onCancel:c,onSubmit:p,task:s})})]})};var Vu=F(Hu);const ve=({open:s,children:e,onOk:t,onCancel:n})=>u(h,{sx:{display:"flex",justifyContent:"space-between",width:"80%",flexWrap:"wrap"},children:r(Te,{open:s,onClose:n,children:[u(X,{}),u(Z,{children:e}),r(J,{children:[u(f,{onClick:n,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(f,{onClick:t,children:"Ok"})]})]})}),Ku=s=>{const[e,t]=o.exports.useState(!1),[n,a]=o.exports.useState("");return[e,n,l=>{t(l),a(l?s:"")}]},Xu=({open:s,onAddTask:e,onCloseDialog:t})=>{const[n,a,i]=Ku("\u0418\u043C\u044F \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C."),[l,c]=o.exports.useState(""),[p,v]=o.exports.useState(""),T=b=>{v(b.target.value)},W=b=>{const g=b.target.value;i(!g),c(b.target.value)},O=()=>{if(!l){i(!0);return}e({name:l,description:p})};return o.exports.useEffect(()=>{s&&(c(""),i(!1),v(""))},[s]),r(A,{children:[u(X,{children:u(d,{children:"\u041D\u043E\u0432\u0430\u044F \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0430"})}),u(Z,{children:r(h,{sx:{display:"flex",flexDirection:"column"},children:[u(z,{autoFocus:!0,error:n,label:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",value:l,helperText:a,variant:"filled",onChange:W,sx:{mb:1}}),u(z,{label:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",value:p,variant:"filled",multiline:!0,maxRows:4,onChange:T})]})}),r(J,{children:[u(f,{onClick:t,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(f,{onClick:O,children:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"})]})]})},Zu=()=>{const s=V(),[e,t]=o.exports.useState(!1),[n,a]=o.exports.useState(!1),[i,l]=o.exports.useState(null),c=o.exports.useCallback(m=>{s(`/tasks/${m}`)},[]);o.exports.useEffect(()=>G.fetch(),[]);const p=o.exports.useCallback(()=>{t(!1)},[]),v=o.exports.useCallback(()=>{t(!0)},[]),T=m=>{l(m),a(!0)},W=()=>{i&&G.remove(i).then(()=>{l(null)}),a(!1)},O=()=>{l(null),a(!1)},b=o.exports.useCallback(m=>{G.create(D(y({},m),{actions:[]})),p()},[]),g=o.exports.useMemo(()=>G.taskList.map(m=>u(Vu,{task:m,onSelect:c,onRemove:T},m.id)),[G.taskList]);return r(h,{sx:{bgcolor:"#f9f9f9",padding:1,minHeight:"98%"},children:[r(h,{sx:{display:"flex",justifyContent:"space-between",width:"80%",flexWrap:"wrap"},children:[u(d,{variant:"h5",children:"\u0421\u043F\u0438\u0441\u043E\u043A \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C"}),u(f,{variant:"contained",color:"primary",onClick:v,children:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"})]}),u(R,{children:g}),u(re,{open:e,onCloseDialog:p,children:u(Xu,{open:e,onAddTask:b,onCloseDialog:p})}),r(ve,{open:n,onOk:W,onCancel:O,children:[u(d,{sx:{mb:2},children:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u0443\u044E \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0443?"}),u(d,{align:"center",sx:{fontWeight:"bold"},children:i==null?void 0:i.name})]})]})};var qu=F(Zu);const Ju=({work:s,onSelect:e,onRemove:t})=>r(M,{sx:{color:"text.primary",mb:.5,p:.2,width:"auto"},children:[r(h,{sx:{display:"flex",bgcolor:"#ffffff",width:"80%",border:"1px solid #001e3c",borderRadius:"2px",cursor:"pointer",flexWrap:"wrap","&:hover":{bgcolor:"#f1f1f1",color:"text.secondary"}},children:[u(d,{variant:"p",component:"span",sx:{width:{xs:"100%",sm:"20%"},padding:1},children:s.status.name}),u(d,{variant:"p",component:"span",sx:{width:{xs:"100%",sm:"40%"},padding:1},children:s.item.name}),s.startTime&&u(d,{variant:"p",component:"span",sx:{width:{xs:"100%",sm:"20%"},padding:1},children:ee(new Date(s.startTime),"dd-MM-yyyy - HH:mm")})]}),u(h,{sx:{display:"flex",flexWrap:{xs:"wrap",sm:"nowrap"},flexGrow:1,justifyContent:"center",ml:1},children:u(f,{variant:"outlined",size:"small",onClick:()=>t(s),children:"\u0443\u0434\u0430\u043B\u0438\u0442\u044C"})})]});var Qu=F(Ju);const Yu=()=>{var p,v;V();const[s,e]=o.exports.useState(!1),[t,n]=o.exports.useState(null);o.exports.useEffect(()=>k.fetch(),[]);const a=T=>{n(T),e(!0)},i=()=>{t&&k.remove(t).then(()=>{n(null)}),e(!1)},l=()=>{n(null),e(!1)},c=o.exports.useMemo(()=>k.workList.map(T=>u(Qu,{work:T,onRemove:a},T.id)),[k.workList]);return r(h,{sx:{bgcolor:"#f9f9f9",padding:1,minHeight:"98%"},children:[u(h,{sx:{display:"flex",justifyContent:"space-between",width:"80%",flexWrap:"wrap"},children:u(d,{variant:"h5",children:"\u0421\u043F\u0438\u0441\u043E\u043A \u0443\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u043D\u044B\u0445 \u0437\u0430\u0434\u0430\u0447"})}),u(R,{children:c}),r(ve,{open:s,onOk:i,onCancel:l,children:[u(d,{sx:{mb:2},children:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u0443\u044E \u0437\u0430\u0434\u0430\u0447\u0443?"}),r(d,{align:"center",sx:{fontWeight:"bold"},children:[(p=t==null?void 0:t.status)==null?void 0:p.name," ",(v=t==null?void 0:t.item)==null?void 0:v.name]})]})]})};var et=F(Yu);const ut=({work:s})=>{let e="#f1f1f1";switch(s.status.id){case x.STATUS.STATUS_RUN:e="#ffffe6";break;case x.STATUS.STATUS_DONE:e="#e8ffe6";break}let t="";switch(s.type.id){case x.ACTION.ACTION_AZIMUTH:case x.ACTION.ACTION_SLOPE:t=s.value1+" \u0433\u0440\u0430\u0434.";break;case x.ACTION.ACTION_WAIT:t=s.value1+" \u0441\u0435\u043A.";break;case x.ACTION.ACTION_SPARK:t=s.value2+" \u0441\u0435\u043A.";break}return u(A,{children:r(M,{sx:{justifyContent:"space-between",flexWrap:"wrap",bgcolor:e,mb:1},children:[u(d,{sx:{width:{xs:"100%",sm:"15%",md:"15%"},fontWeight:"bold"},children:s.type.name}),u(d,{sx:{width:{xs:"100%",sm:"15%",md:"15%"},textAlign:{xs:"left",sm:"center"}},children:t})," ",u(d,{sx:{width:{xs:"100%",sm:"20%"},textAlign:{xs:"left",sm:"right"},fontWeight:"bold"},children:s.status.name})]},s.id)})},tt=()=>{var n;const s=o.exports.useCallback(()=>{k.stopCurrent()},[]);o.exports.useEffect(()=>{k.fetchCurrentWork()},[]);let e=null;const t=(n=k.currentWork)==null?void 0:n.work;return t&&(e=t.details.map(a=>u(ut,{work:a},a.id))),r(A,{children:[r(h,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",bgcolor:"#cdcdcd",px:1},children:[u(d,{variant:"h6",children:"\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u0437\u0430\u0434\u0430\u0447\u0430"}),u(h,{children:u(f,{variant:"contained",color:"primary",onClick:s,sx:{m:1},children:"\u041E\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C"})})]}),u(R,{children:e})]})};var st=F(tt);const nt=({action:s,onRemove:e,onEdit:t})=>r(M,{sx:{color:"text.primary",mb:.5,p:.2,width:"auto"},children:[r(h,{sx:{display:"flex",bgcolor:"#ffffff",width:"80%",border:"1px solid #001e3c",borderRadius:"2px",flexWrap:"wrap",cursor:"pointer","&:hover":{bgcolor:"#f1f1f1",color:"text.secondary"}},onClick:()=>t(s),children:[u(d,{variant:"p",component:"span",sx:{width:{xs:"100%",sm:"40%"},padding:1},children:s.type.name}),r(d,{variant:"p",component:"span",sx:{padding:1},children:[s.type.id===1&&r(d,{children:["\u0430\u0437\u0438\u043C\u0443\u0442 ",u("span",{children:s.value1})," \u0433\u0440\u0430\u0434\u0443\u0441\u043E\u0432"]}),s.type.id===2&&r(d,{children:["\u043D\u0430\u043A\u043B\u043E\u043D ",u("span",{children:s.value1})," \u0433\u0440\u0430\u0434\u0443\u0441\u043E\u0432"]}),s.type.id===3&&r(d,{children:["\u043E\u0436\u0438\u0434\u0430\u043D\u0438\u0435 ",u("span",{children:s.value1})," \u0441\u0435\u043A"]}),s.type.id===4&&r(d,{children:["\u0440\u0430\u0437\u0440\u044F\u0434 \u043A\u043E\u043B-\u0432\u043E ",u("span",{children:s.value1})," \u0432\u0440\u0435\u043C\u044F\xA0",u("span",{children:s.value2})," \u0441\u0435\u043A \u0438\u043D\u0442\u0435\u0440\u0432\u0430\u043B\xA0",u("span",{children:s.value3})," \u0441\u0435\u043A"]})]})]}),u(h,{sx:{display:"flex",flexWrap:{xs:"wrap",sm:"nowrap"},flexGrow:1,justifyContent:"center",ml:1},children:u(f,{variant:"outlined",size:"small",onClick:()=>e(s),children:"\u0443\u0434\u0430\u043B\u0438\u0442\u044C"})})]});var rt=F(nt);const it=({action:s,onSubmit:e,onCloseDialog:t})=>{const n=o.exports.useMemo(()=>({id:x.actionTypes[0].id,name:x.actionTypes[0].name}),[]),a=o.exports.useMemo(()=>({id:null,type:n,value1:0,value2:0,value3:0}),[]),[i,l]=o.exports.useState(s||a),[c,p]=o.exports.useState(()=>x.actionTypes.find(g=>g.id===i.type.id)),v=g=>{l(()=>D(y({},i),{value1:+g.target.value}))},T=g=>{l(()=>D(y({},i),{value2:+g.target.value}))},W=g=>{l(()=>D(y({},i),{value3:+g.target.value}))},O=g=>{const m=g.target.value;p(m),l(D(y({},i),{type:{id:m.id,name:m.name},value1:1,value2:0,value3:0}))},b=o.exports.useMemo(()=>x.actionTypes.map(g=>u(ke,{value:g,children:g.name},g.id)),[]);return r(A,{children:[u(X,{children:u(d,{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435"})}),u(Z,{children:r(h,{sx:{display:"flex",flexDirection:"column"},children:[u(q,{fullWidth:!0,sx:le.gutters,children:u(we,{autoFocus:!0,value:c,onChange:O,children:b})}),u(q,{fullWidth:!0,children:u(z,{label:c.value1.label,value:i.value1,onChange:v,type:"number",inputProps:{max:c.value1.max,min:c.value1.min,step:c.value1.step},sx:le.gutters,InputLabelProps:{shrink:!0}})}),c.id===4&&u(z,{label:c.value2.label,value:i.value2,onChange:T,type:"number",inputProps:{max:c.value2.max,min:c.value2.min,step:c.value2.step},sx:le.gutters,InputLabelProps:{shrink:!0}}),c.id===4&&u(z,{label:c.value3.label,value:i.value3,onChange:W,type:"number",inputProps:{max:c.value3.max,min:c.value3.min,step:c.value3.step},sx:le.gutters,InputLabelProps:{shrink:!0}})]})}),r(J,{children:[u(f,{onClick:t,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(f,{onClick:()=>e(i),children:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})]})]})},le={gutters:{my:1}};var at=F(it);const ot=()=>{var I;const s=qe(),e=V(),[t,n]=o.exports.useState(!1),[a,i]=o.exports.useState(null),[l,c]=o.exports.useState({}),[p,v]=o.exports.useState(!1),[T,W]=o.exports.useState(null),O=o.exports.useCallback(()=>{e("/tasks")},[]);o.exports.useEffect(()=>{G.fetchById(s.id).then(C=>c(C))},[]);const b=o.exports.useCallback(()=>{n(!1)},[]),g=o.exports.useCallback(C=>{i(C),n(!0)},[]),m=o.exports.useCallback(()=>{i(null),n(!0)},[]),U=C=>{W(C),v(!0)},P=()=>{if(T){const C=l.actions.filter($=>T.id!==$.id),L=D(y({},l),{actions:C});c(L),G.update(L).then(()=>{W(null)})}v(!1)},de=()=>{W(null),v(!1)},pe=C=>{C.id||(C.id=Je());const L=l.actions.findIndex(Y=>Y.id===C.id),$=[...l.actions];L===-1?$.push(C):$[L]=y({},C);const N=D(y({},l),{actions:[...$]});c(N),n(!1),G.update(N)},B=Array.isArray(l.actions)?l.actions.map(C=>u(rt,{action:C,onRemove:U,onEdit:g},C.id)):null;return r(h,{sx:{bgcolor:"#f9f9f9",padding:1,minHeight:"98%"},children:[r(h,{sx:{display:"flex",justifyContent:"space-between",width:"80%",flexWrap:"wrap"},children:[u(d,{variant:"h5",children:"\u0421\u043E\u0441\u0442\u0430\u0432 \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u044B"}),r(h,{children:[u(f,{variant:"contained",color:"primary",onClick:O,sx:{mr:1},children:"\u041A \u0441\u043F\u0438\u0441\u043A\u0443"}),u(f,{variant:"contained",color:"primary",onClick:m,children:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"})]})]}),u(R,{children:B}),u(re,{open:t,onCloseDialog:b,children:u(at,{open:t,onCloseDialog:b,onSubmit:pe,action:a})}),r(ve,{open:p,onOk:P,onCancel:de,children:[u(d,{sx:{mb:2},children:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u043E\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435?"}),u(d,{align:"center",sx:{fontWeight:"bold"},children:(I=T==null?void 0:T.type)==null?void 0:I.name})]})]})};var lt=F(ot);const ct=()=>{o.exports.useEffect(()=>{E.fetch()},[]);const s=t=>{E.update(y({},t))},e=E.settingList.map(t=>{let n=!0;return t.id===E.SETTING.SETTING_VERSION&&(n=!1),u(Ie,{setting:t,onEdit:s,editable:n},t.id)});return u(A,{children:u(R,{sx:{mb:2},children:e})})};var dt=F(ct);const pt=({openDialog:s})=>r(A,{children:[u(f,{variant:"contained",color:"primary",onClick:E.updateServer,sx:{mr:1,mb:1},children:"\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u0430"}),u(f,{variant:"contained",color:"primary",onClick:E.shutdown,sx:{mr:1,mb:1},children:"\u0412\u044B\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u043E"}),u(f,{variant:"contained",color:"primary",onClick:()=>{s("azimuth")},sx:{mr:1,mb:1},children:"\u041A\u0430\u043B\u0438\u0431\u0440\u043E\u0432\u043A\u0430 \u0430\u0437\u0438\u043C\u0443\u0442\u0430"}),u(f,{variant:"contained",color:"primary",onClick:()=>{s("slope")},sx:{mr:1,mb:1},children:"\u041A\u0430\u043B\u0438\u0431\u0440\u043E\u0432\u043A\u0430 \u043D\u0430\u043A\u043B\u043E\u043D\u0430"})]}),ht=[{description:'\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u043E \u043D\u0430 \u0430\u0437\u0438\u043C\u0443\u0442 0 \u0438 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 "\u0414\u0430\u043B\u0435\u0435".',time:0},{description:`\u041F\u043E\u0432\u043E\u0440\u043E\u0442 \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 5 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0430\u0437\u0438\u043C\u0443\u0442\u0430.`,time:5},{description:`\u041F\u043E\u0432\u043E\u0440\u043E\u0442 \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 10 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0430\u0437\u0438\u043C\u0443\u0442\u0430.`,time:10},{description:`\u041F\u043E\u0432\u043E\u0440\u043E\u0442 \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 15 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0430\u0437\u0438\u043C\u0443\u0442\u0430.`,time:15}],mt=[{description:'\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435 \u043D\u0430\u043A\u043B\u043E\u043D \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0430 \u043D\u0430 0 \u0438 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 "\u0414\u0430\u043B\u0435\u0435".',time:0},{description:`\u041D\u0430\u043A\u043B\u043E\u043D \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 2 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0443\u0433\u043B\u0430 \u043D\u0430\u043A\u043B\u043E\u043D\u0430.`,time:2},{description:`\u041D\u0430\u043A\u043B\u043E\u043D \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 4 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0443\u0433\u043B\u0430 \u043D\u0430\u043A\u043B\u043E\u043D\u0430.`,time:4},{description:`\u041D\u0430\u043A\u043B\u043E\u043D \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 6 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0443\u0433\u043B\u0430 \u043D\u0430\u043A\u043B\u043E\u043D\u0430.`,time:6}],ft=({onCancel:s,mode:e})=>{const[t,n]=o.exports.useState(0),[a,i]=o.exports.useState(!1);let l="",c=[];switch(e){case"azimuth":l="\u041A\u0430\u043B\u0438\u0431\u0440\u043E\u0432\u043A\u0430 \u0430\u0437\u0438\u043C\u0443\u0442\u0430",c=ht;break;case"slope":l="\u041A\u0430\u043B\u0438\u0431\u0440\u043E\u0432\u043A\u0430 \u043D\u0430\u043A\u043B\u043E\u043D\u0430",c=mt;break}const p=c.length,[v,T]=o.exports.useState(new Array(p).fill(0)),[W,O]=o.exports.useState(new Array(p).fill(0)),b=(B,I=3)=>Number(B.toFixed(I)),g=()=>{k.stopCurrent(),i(!0);const B=c[t].time;let I=()=>{};switch(e){case"azimuth":I=k.calibrateAzimuth;break;case"slope":I=k.calibrateSlope;break}I(B)},m=()=>{k.stopCurrent(),s()},U=B=>{const I=+B.target.value,C=[...v],L=[...W];C[t]=I;let $=b((I-C[t-1])/c[t].time);$=$<=0?0:$,L[t]=$,T(C),O(L)},P=()=>{k.stopCurrent();const B=[0];for(let N=1;N<c.length;N++){const Y=b((v[N]-v[N-1])/c[N].time);B.push(Y)}const I=B.reduce((N,Y)=>N+Y),C=b(I/(c.length-1));let L={},$={};switch(e){case"azimuth":L=D(y({},E.settingList[0]),{value:C}),$=D(y({},E.settingList[2]),{value:v[v.length-1]});break;case"slope":L=D(y({},E.settingList[1]),{value:C}),$=D(y({},E.settingList[3]),{value:v[v.length-1]});break}C>0&&(E.update(L),E.update($)),s()},de=()=>{n(B=>B+1),i(!1)},pe=()=>{n(B=>B-1),i(!1)};return r(A,{children:[u(X,{children:u(d,{children:l})}),u(Z,{children:r(h,{sx:{display:"flex",flexDirection:"column"},children:[u(h,{sx:{p:2},children:c[t].description}),t!==0&&r(q,{children:[u(f,{onClick:g,variant:"contained",color:"primary",disabled:a,sx:{width:{md:"50%",xl:"25%"},mb:1,ml:1},children:"\u0421\u0442\u0430\u0440\u0442"}),u(z,{sx:{m:1},label:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435",type:"number",inputProps:{max:350,min:0,step:.1},value:v[t],onChange:U,InputLabelProps:{shrink:!0}}),r(d,{sx:{mx:1},children:["\u0421\u043A\u043E\u0440\u043E\u0441\u0442\u044C: ",W[t]]})]}),u(Qe,{sx:{justifySelf:"flex-end"},variant:"text",steps:p,position:"static",activeStep:t,nextButton:r(f,{size:"small",onClick:de,disabled:t===p-1,children:["\u0414\u0430\u043B\u0435\u0435",u(Ye,{})]}),backButton:r(f,{size:"small",onClick:pe,disabled:t===0,children:[u(eu,{}),"\u041D\u0430\u0437\u0430\u0434"]})})]})}),r(J,{children:[u(f,{onClick:m,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(f,{onClick:P,children:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})]})]})},xt=()=>{const[s,e]=o.exports.useState(!1),[t,n]=o.exports.useState("azimuth"),a=l=>{n(l),e(!0)},i=()=>{e(!1)};return r(A,{children:[u(d,{variant:"h6",children:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438"}),u(dt,{}),u(pt,{openDialog:a}),u(re,{open:s,onCloseDialog:i,children:u(ft,{onCancel:i,mode:t})})]})},H="/",vt=({routes:s})=>u(A,{children:u(uu,{children:u(vu,{children:u(tu,{children:r(_,{path:`${H}`,element:u(hu,{}),children:[u(_,{path:`${H}`,element:u(Mu,{})}),r(_,{path:`${H}tasks`,element:u(_u,{}),children:[u(_,{path:`${H}tasks`,element:u(qu,{})}),u(_,{path:`${H}tasks:id`,element:u(lt,{})})]}),r(_,{path:`${H}works`,element:u(Pu,{}),children:[u(_,{path:`${H}works`,element:u(et,{})}),u(_,{path:"/works/current-work",element:u(st,{})})]}),u(_,{path:`${H}settings`,element:u(xt,{})})]})})})})});const ce=su(`ws://${location.hostname}`);ce.on("connect",()=>{console.log("socket ",ce.connected)});ce.on("workStatusUpdate",s=>{k.fetch(),k.fetchCurrentWork()});ce.on("serverTime",s=>{E.setServerTime(+s)});const yt=nu({palette:{primary:{main:"#1976d2"},bgGray:{main:"#f9f9f9"}}},ru);iu.render(u(au.StrictMode,{children:u(ou,{theme:yt,children:u(lu,{dateAdapter:cu,locale:xe,children:u(vt,{})})})}),document.getElementById("root"));
