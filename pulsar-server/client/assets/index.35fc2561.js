var Au=Object.defineProperty,Bu=Object.defineProperties;var Wu=Object.getOwnPropertyDescriptors;var hu=Object.getOwnPropertySymbols;var Iu=Object.prototype.hasOwnProperty,Fu=Object.prototype.propertyIsEnumerable;var ou=(n,e,t)=>e in n?Au(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,g=(n,e)=>{for(var t in e||(e={}))Iu.call(e,t)&&ou(n,t,e[t]);if(hu)for(var t of hu(e))Fu.call(e,t)&&ou(n,t,e[t]);return n},N=(n,e)=>Bu(n,Wu(e));var R=(n,e,t)=>(ou(n,typeof e!="symbol"?e+"":e,t),t);import{s as $u,j as u,O as lu,d as Ou,a as Ru,b as Lu,c as Nu,u as G,L as P,e as mu,A as Uu,C as cu,f as r,T as Mu,g as d,B as p,h as U,I as fu,i as _u,k as Pu,D as ju,l as Gu,r as o,m as H,n as su,o as tu,p as W,F as T,q as f,t as xu,v as Z,w as q,x as Q,y as z,z as J,E as du,M as Cu,S as yu,G as Hu,H as gu,J as bu,K as zu,N as Ku,P as Vu,Q as Xu,R as Zu,U as qu,V as Ju,W as M,X as Qu,Y as Yu,Z as ue,_ as ee,$ as te,a0 as ne,a1 as se,a2 as re}from"./vendor.46f37d01.js";const ae=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerpolicy&&(i.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?i.credentials="include":a.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}};ae();const ie=$u("main")({flexGrow:1,margin:10}),oe=()=>u(ie,{children:u(lu,{})}),ru="/";var Eu=[{label:"\u0413\u043B\u0430\u0432\u043D\u0430\u044F",path:`${ru}`,icon:u(Ou,{color:"primary"})},{label:"\u041F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u044B",path:`${ru}tasks`,icon:u(Ru,{color:"primary"})},{label:"\u0417\u0430\u0434\u0430\u0447\u0438",path:`${ru}works`,icon:u(Lu,{color:"primary"})},{label:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438",path:`${ru}settings`,icon:u(Nu,{color:"primary"})}];const vu="Pulsar",le=({toggleOpen:n})=>{const e=G(),t=Eu.map(s=>u(P,{button:!0,onClick:()=>e(s.path,{replace:!0}),children:u(mu,{primary:s.label})},s.label));return u(Uu,{position:"fixed",children:u(cu,{maxWidth:"xl",children:r(Mu,{disableGutters:!0,children:[u(d,{variant:"h6",noWrap:!0,component:"h1",sx:Y.logoSm,children:vu}),u(p,{sx:Y.menu,children:u(U,{component:"nav",sx:Y.nav,children:t})}),u(p,{sx:Y.icon,children:u(fu,{size:"large","aria-label":"open menu","aria-controls":"menu-appbar","aria-haspopup":"true",color:"inherit",onClick:n,sx:Y.iconButton,children:u(_u,{})})}),u(d,{variant:"h6",noWrap:!0,component:"h1",sx:Y.logoXs,children:vu})]})})})},Y={logoSm:{mr:2,display:{xs:"none",sm:"flex"}},logoXs:{flexGrow:1,justifyContent:"flex-end",display:{xs:"flex",sm:"none"}},menu:{flexGrow:1,justifyContent:"flex-end",display:{xs:"none",sm:"flex"}},nav:{display:"flex",flexDirection:"row"},iconButton:{padding:"20px"},icon:{display:{xs:"flex",sm:"none"}}},ce=({open:n,toggleOpen:e})=>{const t=G(),s=i=>{t(i,{replace:!0}),e()},a=Eu.map(i=>r(P,{button:!0,onClick:()=>s(i.path),children:[u(Pu,{children:i.icon}),u(mu,{primary:i.label})]},i.label));return r(ju,{sx:wu.drawer,open:n,onClose:e,children:[r(p,{sx:{display:{xs:"flex",sm:"none"}},children:[u(d,{children:"Pulsar"}),u(fu,{size:"large","aria-label":"open menu","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:e,sx:wu.closeButton,children:u(Gu,{})})]}),u(U,{component:"nav",children:a})]})},wu={drawer:{width:300,"& .MuiDrawer-paper":{width:300,boxSizing:"border-box",top:"auto",padding:"10px 10px"}},closeButton:{color:"text.secondary"}},de=n=>{const[e,t]=o.exports.useState(!!n);return[e,()=>{t(()=>!e)}]},pe=({children:n})=>{const[e,t]=de(!1);return r(cu,{maxWidth:"100vw",disableGutters:!0,sx:Su.container,children:[u(le,{toggleOpen:t}),r(cu,{sx:Su.content,disableGutters:!0,children:[u(ce,{open:e,toggleOpen:t}),n]})]})},Su={container:{display:"flex",flexDirection:"column",minHeight:"100vh"},content:{display:"flex",flexGrow:1,mt:8}},K=`${location.protocol}//${location.hostname}`;class he{async fetch(e){return(await H.get(`${K}/${e}`)).data}async fetchById(e,t){return(await H.get(`${K}/${e}/${t}`)).data}async create(e,t){return(await H.post(`${K}/${e}`,t)).data}async remove(e,t){return(await H.delete(`${K}/${e}/${t}`)).data}async update(e,t){return(await H.put(`${K}/${e}/${t.id}`,t)).data}async repair(e){return await H.post(`${K}/${e}`)}async backup(e){await H({url:`${K}/${e}`,method:"GET",responseType:"blob"}).then(t=>{const s=t.headers["content-type"],a=new Blob([t.data],{type:s,encoding:"UTF-8"}),i=document.createElement("a"),l=t.headers["content-disposition"].split("filename=")[1].replace(/"/g,"");i.href=window.URL.createObjectURL(a),i.download=l,i.click()})}async restore(e,t){const s={result:null,error:null};let a=null;try{if(a=JSON.parse(t),!a.settings)return s.error="\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E\u0435 \u0441\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u0435 \u0444\u0430\u0439\u043B\u0430.",s}catch(i){return s.error=i,s}return await H.post(`${K}/${e}`,a)}}var S=new he;class me{constructor(){R(this,"actionTypes",[]);R(this,"workTypes",[]);R(this,"statusTypes",[]);R(this,"WORK",{});R(this,"STATUS",{});R(this,"ACTION",{});su(this),this.fetch()}fill(e){this.actionTypes=e.actionTypes,this.workTypes=e.workTypes,this.statusTypes=e.statusTypes,this.WORK=e.WORK,this.STATUS=e.STATUS,this.ACTION=e.ACTION}async fetch(){const e=await S.fetch("api/dictonary");this.fill(e.result)}getStatus(e){return this.statusTypes.find(t=>t.id===e)}}const C=new me;class fe{constructor(){R(this,"settingList",[]);R(this,"SETTING",{});R(this,"serverTime","");su(this)}setServerTime(e){this.serverTime=tu(e,"dd-MM-yyyy - HH:mm")}fill(e){this.settingList=e}fillSETTING(e){this.SETTING=e}async fetch(){const e=await S.fetch("api/settings");this.fill(e.settings.result),this.fillSETTING(e.SETTING),await S.fetch("api/settings/serverTime")}async update(e){await S.update("api/settings",e);const t=[...this.settingList],s=t.findIndex(a=>a.id===e.id);t[s]=g({},e),this.fill(t)}async updateServer(){setTimeout(()=>{window.close()},2e3),await S.fetch("api/settings/updateServer")}async backup(){await S.backup("api/settings/backup")}async repair(){setTimeout(()=>{window.close()},2e3),await S.repair("api/settings/repair")}async restore(e){return setTimeout(()=>{window.close()},2e3),await S.restore("api/settings/restore",e)}async shutdown(){setTimeout(()=>{window.close()},2e3),await S.fetch("api/settings/shutdown")}async calibrateAzimuth(e){return await S.fetch(`api/works/calibrateAzimuth?time=${e}`)}async calibrateSlope(e){return await S.fetch(`api/works/calibrateSlope?time=${e}`)}}const b=new fe;class xe{constructor(){R(this,"taskList",[]);su(this)}fill(e){this.taskList=e}async fetch(){const e=await S.fetch("api/tasks");this.fill(e.result)}async fetchById(e){return(await S.fetchById("api/tasks",e)).result}async remove(e){const t=await S.remove("api/tasks",e.id),s=this.taskList.filter(a=>a.id!==e.id);return this.fill(s),t.result}async create(e){const s=(await S.create("api/tasks",e)).result;this.fill([...this.taskList,s])}async update(e){const t=await S.update("api/tasks",e);let s=this.taskList.findIndex(a=>a.id===e.id);return this.taskList[s]=g({},e),t.result}}const V=new xe;class Ce{constructor(){R(this,"workList",[]);R(this,"currentWork",null);su(this)}fill(e){this.workList=e}fillCurrentWork(e){e.length>0?this.currentWork=e[0]:this.currentWork=null}async fetch(){const e=await S.fetch("api/works");this.fill(e.result)}async fetchCurrentWork(){const e=await S.fetch("api/works/currentWork");this.fillCurrentWork(e.result)}async create(e){const s=(await S.create("api/works",e)).result;this.fill([...this.workList,s])}async stopCurrent(){return await S.fetch("api/works/stopCurrent")}async remove(e){const t=await S.remove("api/works",e.id),s=this.workList.filter(a=>a.id!==e.id);return this.fill(s),t.result}}const D=new Ce,ye=()=>{var i;o.exports.useEffect(()=>{D.fetchCurrentWork()},[]);const n=G(),e=o.exports.useCallback(()=>{n("/works/current-work")},[]),t=o.exports.useCallback(()=>{D.stopCurrent()},[]);let s=[];const a=(i=D.currentWork)==null?void 0:i.work;return a&&(s=a.details.filter(l=>l.status.id===C.STATUS.STATUS_RUN).map(l=>u(P,{children:l.type.name},l.id))),r(T,{children:[r(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:1,bgcolor:"#cdcdcd"},children:[u(d,{variant:"span",children:"\u0422\u0435\u043A\u0443\u0449\u0435\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435"}),s.length===0&&u(d,{variant:"span",children:"\u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442"}),s.length!==0&&u(U,{children:s})]}),r(p,{sx:{display:"flex",bgcolor:"#cdcdcd"},children:[u(f,{variant:"contained",color:"primary",onClick:e,sx:{m:1},children:"\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u0435\u0435"}),u(f,{variant:"contained",color:"primary",onClick:t,sx:{m:1},children:"\u041E\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C"})]})]})};var ge=W(ye);const be=()=>{const n=D.workList.filter(e=>e.status.id===C.STATUS.STATUS_RUN).map(e=>u(P,{children:e.item.name},e.id));return r(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",bgcolor:"#cdcdcd",p:1,mb:2},children:[u(d,{variant:"span",children:"\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u0437\u0430\u0434\u0430\u0447\u0430 "}),n.length===0&&u(d,{variant:"span",children:"\u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442"}),n.length!==0&&u(U,{children:n})]})};var Ee=W(be);const ve=()=>{const n=D.workList.filter(e=>e.status.id===C.STATUS.STATUS_WAIT).map(e=>{const t=tu(e.startTime,"dd-MM-yyyy - HH:mm");return r(P,{sx:{flexWrap:"wrap",justifyContent:"space-between"},children:[u(p,{variant:"div",sx:{width:"70%"},children:e.item.name}),u(p,{variant:"div",sx:{color:"blue"},children:t})]},e.id)});return r(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",bgcolor:"#cdcdcd",p:1,my:2,flexWrap:"wrap"},children:[u(d,{variant:"span",children:"\u0417\u0430\u043F\u043B\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0435"}),n.length===0&&u(d,{variant:"span",children:"\u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044E\u0442"}),n.length!==0&&u(U,{sx:{width:"100%"},children:n})]})};var we=W(ve);const Se=()=>(o.exports.useEffect(()=>{D.fetch()},[]),r(p,{sx:{borderWidth:"1px",borderStyle:"solid",borderColor:"black",borderRadius:"5px",minHeight:"98%",p:.5,m:.5},children:[u(d,{children:"\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E \u0437\u0430\u0434\u0430\u043D\u0438\u044F\u0445"}),u(we,{}),u(Ee,{}),u(ge,{})]})),uu=n=>{const{open:e,onCloseDialog:t,children:s}=n;return u(xu,{open:e,onClose:t,sx:{"& .MuiPaper-root":{width:{xs:"98%",sm:"50%"}}},children:s})},Te=({setting:n,onCancel:e,onSubmit:t})=>{const[s,a]=o.exports.useState(g({},n)),i=c=>{const y=c.target.value;a(N(g({},s),{value:y}))},l=()=>{const c=g({},s);return c.value=Number((+c.value).toFixed(3)),g({},c)};return r(T,{children:[u(Z,{children:u(d,{children:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u0430"})}),u(q,{children:u(p,{sx:{display:"flex",flexDirection:"column"},children:u(Q,{children:u(z,{autoFocus:!0,sx:{m:1},label:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435",type:"number",inputProps:{max:350,min:0,step:.1},value:s.value,onChange:i,InputLabelProps:{shrink:!0}})})})}),r(J,{children:[u(f,{onClick:e,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(f,{onClick:()=>t(l()),children:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})]})]})},Tu=({setting:n,onEdit:e,editable:t=!0})=>{const[s,a]=o.exports.useState(!1),i=()=>{a(!0)},l=()=>{a(!1)},c=y=>{e(g({},y)),l()};return r(T,{children:[r(P,{sx:{justifyContent:"space-between",wordWrap:"wrap",bgcolor:"#f9f9f9"},children:[u(d,{sx:{width:"40%"},children:n.name}),r(p,{sx:{width:"60%",display:"flex",justifyContent:"space-between"},children:[u(d,{sx:{width:"50%",display:"flex",justifyContent:"center",fontSize:"1.5rem",color:"blue"},children:n.value}),t&&u(f,{onClick:i,children:"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C"})]})]},n.id),u(uu,{open:s,onCloseDialog:l,children:u(Te,{onCancel:l,onSubmit:c,setting:n})})]})},De=()=>{o.exports.useEffect(()=>{b.fetch()},[]);const n=b.settingList?b.settingList.filter(e=>e.id!==b.SETTING.SETTING_AZIMUTH_SPEED&&e.id!==b.SETTING.SETTING_SLOPE_SPEED).map(e=>u(Tu,{setting:e,editable:!1},e.id)):null;return r(p,{sx:{borderWidth:"1px",borderStyle:"solid",borderColor:"black",borderRadius:"5px",minHeight:"98%",p:.5,m:.5},children:[u(d,{children:"\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E\u0431 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0435"}),r(p,{sx:{display:"flex",justifyContent:"space-between",px:2,mt:2,color:"blue"},children:[u(d,{variant:"div",children:"\u0412\u0440\u0435\u043C\u044F \u0441\u0435\u0440\u0432\u0435\u0440\u0430"}),u(d,{variant:"div",children:b.serverTime})]}),u(U,{sx:{mb:2},children:n})]})};var ke=W(De);const Du=()=>r(T,{children:[u(d,{sx:{color:"red",border:"2px solid red",borderRadius:1,fontWeight:"bold",width:"80%",m:"10px auto",p:1},children:"\u0412\u041D\u0418\u041C\u0410\u041D\u0418\u0415!!! \u041F\u0435\u0440\u0435\u0434 \u0440\u0430\u0431\u043E\u0442\u043E\u0439 \u043F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435 \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E\u0432\u0442\u044C \u0432\u044B\u0441\u0442\u0430\u0432\u043B\u0435\u043D\u043D\u043E\u0433\u043E \u0430\u0437\u0438\u043C\u0443\u0442\u0430 \u0438 \u043D\u0430\u043A\u043B\u043E\u043D\u0430!!!"}),r(p,{sx:{bgcolor:"#f9f9f9",p:1,minHeight:"85%",display:"flex",flexWrap:"wrap",justifyContent:"center"},children:[u(p,{sx:{padding:1,width:{xs:"100%",sm:"45%"},minHeight:"95%"},children:u(Se,{})}),u(p,{sx:{padding:1,width:{xs:"100%",sm:"45%"},minHeight:"95%"},children:u(ke,{})})]})]}),Ae=()=>u(T,{children:u(lu,{})}),Be=()=>u(T,{children:u(lu,{})}),We=({task:n,onSubmit:e,onCancel:t})=>{const s=o.exports.useMemo(()=>C.workTypes.find(m=>m.id===C.WORK.WORK_PROGRAMM),[]),a=o.exports.useMemo(()=>C.statusTypes.find(m=>m.id===C.STATUS.STATUS_RUN),[]),i=o.exports.useMemo(()=>({type:s,status:a,item:n,startTime:null,details:[]}),[]),[l,c]=o.exports.useState(i),[y,x]=o.exports.useState(a),[E,k]=o.exports.useState(tu(new Date,"yyyy-MM-dd'T'HH:mm",{locale:du})),F=m=>{const $=tu(m,"yyyy-MM-dd'T'HH:mm",{locale:du}),A=gu(bu($));k($),c(N(g({},l),{startTime:A}))},h=m=>{const $=m.target.value;let A=null;x($),$.id===C.STATUS.STATUS_WAIT&&(A=gu(bu(E))),c(N(g({},l),{status:$,startTime:A}))},w=o.exports.useMemo(()=>C.statusTypes.map(m=>(m.id===C.STATUS.STATUS_RUN||m.id===C.STATUS.STATUS_WAIT)&&u(Cu,{value:m,children:m.name},m.id)),[]);return r(T,{children:[u(Z,{children:u(d,{children:"\u0417\u0430\u0434\u0430\u043D\u0438\u0435"})}),u(q,{children:r(p,{sx:{display:"flex",flexDirection:"column"},children:[u(Q,{fullWidth:!0,sx:Ie.gutters,children:u(yu,{autoFocus:!0,value:y,onChange:h,children:w})}),y.id===C.STATUS.STATUS_WAIT&&u(Q,{children:u(Hu,{value:E,onChange:F,renderInput:m=>u(z,g({},m))})})]})}),r(J,{children:[u(f,{onClick:t,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(f,{onClick:()=>e(l),children:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})]})]})},Ie={gutters:{my:1}};var Fe=W(We);const $e=({task:n,onSelect:e,onRemove:t})=>{const[s,a]=o.exports.useState(!1),i=G(),l=()=>{a(!0)},c=()=>{a(!1)},y=async x=>{await D.create(x),a(!1),x.status.id===C.STATUS.STATUS_RUN&&i("/works/current-work")};return r(T,{children:[r(P,{sx:{color:"text.primary",mb:.5,p:.2,width:"auto"},children:[r(p,{sx:{display:"flex",bgcolor:"#ffffff",width:"80%",border:"1px solid #001e3c",borderRadius:"2px",cursor:"pointer",flexWrap:"wrap","&:hover":{bgcolor:"#f1f1f1",color:"text.secondary"},alignItems:"center"},onClick:()=>e(n.id),children:[u(d,{variant:"p",component:"span",sx:{width:{xs:"100%",sm:"40%"},padding:1},children:n.name}),u(d,{variant:"p",component:"span",sx:{padding:1,fontSize:"caption.fontSize"},children:n.description})]}),r(p,{sx:{display:"flex",flexWrap:{xs:"wrap",sm:"nowrap"},flexGrow:1,justifyContent:"center",ml:1},children:[u(f,{variant:"outlined",size:"small",sx:{mr:{xs:0,sm:.5},mb:{xs:.5,sm:0}},onClick:l,children:"\u0437\u0430\u043F\u0443\u0441\u043A"}),u(f,{variant:"outlined",size:"small",onClick:()=>t(n),children:"\u0443\u0434\u0430\u043B\u0438\u0442\u044C"})]})]}),u(uu,{open:s,onCloseDialog:c,children:u(Fe,{onCancel:c,onSubmit:y,task:n})})]})};var Oe=W($e);const pu=({open:n,children:e,onOk:t,onCancel:s})=>u(p,{sx:{display:"flex",justifyContent:"space-between",width:"80%",flexWrap:"wrap"},children:r(xu,{open:n,onClose:s,children:[u(Z,{}),u(q,{children:e}),r(J,{children:[u(f,{onClick:s,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(f,{onClick:t,children:"Ok"})]})]})}),Re=n=>{const[e,t]=o.exports.useState(!1),[s,a]=o.exports.useState("");return[e,s,l=>{t(l),a(l?n:"")}]},Le=({open:n,onAddTask:e,onCloseDialog:t})=>{const[s,a,i]=Re("\u0418\u043C\u044F \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C."),[l,c]=o.exports.useState(""),[y,x]=o.exports.useState(""),E=h=>{x(h.target.value)},k=h=>{const w=h.target.value;i(!w),c(h.target.value)},F=()=>{if(!l){i(!0);return}e({name:l,description:y})};return o.exports.useEffect(()=>{n&&(c(""),i(!1),x(""))},[n]),r(T,{children:[u(Z,{children:u(d,{children:"\u041D\u043E\u0432\u0430\u044F \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0430"})}),u(q,{children:r(p,{sx:{display:"flex",flexDirection:"column"},children:[u(z,{autoFocus:!0,error:s,label:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",value:l,helperText:a,variant:"filled",onChange:k,sx:{mb:1}}),u(z,{label:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",value:y,variant:"filled",multiline:!0,maxRows:4,onChange:E})]})}),r(J,{children:[u(f,{onClick:t,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(f,{onClick:F,children:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"})]})]})},Ne=()=>{const n=G(),[e,t]=o.exports.useState(!1),[s,a]=o.exports.useState(!1),[i,l]=o.exports.useState(null),c=o.exports.useCallback(m=>{n(`/tasks/${m}`)},[]);o.exports.useEffect(()=>V.fetch(),[]);const y=o.exports.useCallback(()=>{t(!1)},[]),x=o.exports.useCallback(()=>{t(!0)},[]),E=m=>{l(m),a(!0)},k=()=>{i&&V.remove(i).then(()=>{l(null)}),a(!1)},F=()=>{l(null),a(!1)},h=o.exports.useCallback(m=>{V.create(N(g({},m),{actions:[]})),y()},[]),w=o.exports.useMemo(()=>V.taskList.map(m=>u(Oe,{task:m,onSelect:c,onRemove:E},m.id)),[V.taskList]);return r(p,{sx:{bgcolor:"#f9f9f9",padding:1,minHeight:"98%"},children:[r(p,{sx:{display:"flex",justifyContent:"space-between",width:"80%",flexWrap:"wrap"},children:[u(d,{variant:"h5",children:"\u0421\u043F\u0438\u0441\u043E\u043A \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C"}),u(f,{variant:"contained",color:"primary",onClick:x,children:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"})]}),u(U,{children:w}),u(uu,{open:e,onCloseDialog:y,children:u(Le,{open:e,onAddTask:h,onCloseDialog:y})}),r(pu,{open:s,onOk:k,onCancel:F,children:[u(d,{sx:{mb:2},children:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u0443\u044E \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0443?"}),u(d,{align:"center",sx:{fontWeight:"bold"},children:i==null?void 0:i.name})]})]})};var Ue=W(Ne);const ku=(n,e="#f1f1f1")=>o.exports.useMemo(()=>{switch(n.id){case C.STATUS.STATUS_RUN:return"#ffffe6";case C.STATUS.STATUS_DONE:return"#e8ffe6";case C.STATUS.STATUS_EXPIRED:case C.STATUS.STATUS_STOPPED:return"#ffe6e7";default:return e}},[n]),Me=({work:n,onRemove:e})=>{const t=ku(n.status),s=n.startTime?tu(n.startTime,"dd-MM-yyyy - HH:mm"):null,a=G(),i=n.status.id===C.STATUS.STATUS_RUN?"pointer":"default";return r(P,{sx:{color:"text.primary",mb:.5,p:.2,width:"auto"},children:[r(p,{sx:{display:"flex",width:"80%",border:"1px solid #001e3c",borderRadius:"2px",cursor:()=>i,flexWrap:"wrap",bgcolor:t},onClick:()=>{n.status.id===C.STATUS.STATUS_RUN&&a("/works/current-work")},children:[u(d,{variant:"p",component:"span",sx:{width:{xs:"100%",sm:"20%"},padding:1},children:n.status.name}),u(d,{variant:"p",component:"span",sx:{width:{xs:"100%",sm:"40%"},padding:1},children:n.item.name}),r(d,{variant:"p",component:"span",sx:{width:{xs:"100%",sm:"20%"},padding:1},children:[!!s&&s,!s&&"\u043D\u0435\u043C\u0435\u0434\u043B\u0435\u043D\u043D\u043E"]})]}),u(p,{sx:{display:"flex",flexWrap:{xs:"wrap",sm:"nowrap"},flexGrow:1,justifyContent:"center",ml:1},children:u(f,{variant:"outlined",size:"small",onClick:()=>e(n),children:"\u0443\u0434\u0430\u043B\u0438\u0442\u044C"})})]})};var _e=W(Me);const Pe=()=>{var y,x;G();const[n,e]=o.exports.useState(!1),[t,s]=o.exports.useState(null);o.exports.useEffect(()=>D.fetch(),[]);const a=E=>{s(E),e(!0)},i=()=>{t&&D.remove(t).then(()=>{s(null)}),e(!1)},l=()=>{s(null),e(!1)},c=o.exports.useMemo(()=>D.workList.map(E=>u(_e,{work:E,onRemove:a},E.id)),[D.workList]);return r(p,{sx:{bgcolor:"#f9f9f9",padding:1,minHeight:"98%"},children:[u(p,{sx:{display:"flex",justifyContent:"space-between",width:"80%",flexWrap:"wrap"},children:u(d,{variant:"h5",children:"\u0421\u043F\u0438\u0441\u043E\u043A \u0443\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u043D\u044B\u0445 \u0437\u0430\u0434\u0430\u0447"})}),u(U,{children:c}),r(pu,{open:n,onOk:i,onCancel:l,children:[u(d,{sx:{mb:2},children:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u0443\u044E \u0437\u0430\u0434\u0430\u0447\u0443?"}),r(d,{align:"center",sx:{fontWeight:"bold"},children:[(y=t==null?void 0:t.status)==null?void 0:y.name," ",(x=t==null?void 0:t.item)==null?void 0:x.name]})]})]})};var je=W(Pe);const Ge=({work:n})=>{const e=ku(n.status);let t="";switch(n.type.id){case C.ACTION.ACTION_AZIMUTH:case C.ACTION.ACTION_SLOPE:t=n.value1+" \u0433\u0440\u0430\u0434.";break;case C.ACTION.ACTION_WAIT:t=n.value1+" \u0441\u0435\u043A.";break;case C.ACTION.ACTION_SPARK:t=n.value2+" \u0441\u0435\u043A.";break}return u(T,{children:r(P,{sx:{justifyContent:"space-between",flexWrap:"wrap",bgcolor:e,mb:1},children:[u(d,{sx:{width:{xs:"100%",sm:"15%",md:"15%"},fontWeight:"bold"},children:n.type.name}),u(d,{sx:{width:{xs:"100%",sm:"15%",md:"15%"},textAlign:{xs:"left",sm:"center"}},children:t})," ",u(d,{sx:{width:{xs:"100%",sm:"20%"},textAlign:{xs:"left",sm:"right"},fontWeight:"bold"},children:n.status.name})]},n.id)})},He=()=>{var s;const n=o.exports.useCallback(()=>{D.stopCurrent()},[]);o.exports.useEffect(()=>{D.fetchCurrentWork()},[]);let e=null;const t=(s=D.currentWork)==null?void 0:s.work;return t&&(e=t.details.map(a=>u(Ge,{work:a},a.id))),r(T,{children:[r(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",bgcolor:"#cdcdcd",px:1},children:[u(d,{variant:"h6",children:"\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u0437\u0430\u0434\u0430\u0447\u0430"}),u(p,{children:u(f,{variant:"contained",color:"primary",onClick:n,sx:{m:1},children:"\u041E\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C"})})]}),!e&&u(p,{sx:{my:10,fontWeight:"bold",display:"flex",width:"100%",justifyContent:"center",alignItems:"center"},children:"\u041D\u0435\u0442 \u0442\u0435\u043A\u0443\u0449\u0435\u0439 \u0437\u0430\u0434\u0430\u0447\u0438"}),u(U,{children:e})]})};var ze=W(He);const Ke=({action:n,onRemove:e,onEdit:t})=>r(P,{sx:{color:"text.primary",mb:.5,p:.2,width:"auto"},children:[r(p,{sx:{display:"flex",bgcolor:"#ffffff",width:"80%",border:"1px solid #001e3c",borderRadius:"2px",flexWrap:"wrap",cursor:"pointer","&:hover":{bgcolor:"#f1f1f1",color:"text.secondary"}},onClick:()=>t(n),children:[u(d,{variant:"p",component:"span",sx:{width:{xs:"100%",sm:"40%"},padding:1},children:n.type.name}),r(d,{variant:"p",component:"span",sx:{padding:1},children:[n.type.id===1&&r(d,{children:["\u0430\u0437\u0438\u043C\u0443\u0442 ",u("span",{children:n.value1})," \u0433\u0440\u0430\u0434\u0443\u0441\u043E\u0432"]}),n.type.id===2&&r(d,{children:["\u043D\u0430\u043A\u043B\u043E\u043D ",u("span",{children:n.value1})," \u0433\u0440\u0430\u0434\u0443\u0441\u043E\u0432"]}),n.type.id===3&&r(d,{children:["\u043E\u0436\u0438\u0434\u0430\u043D\u0438\u0435 ",u("span",{children:n.value1})," \u0441\u0435\u043A"]}),n.type.id===4&&r(d,{children:["\u0440\u0430\u0437\u0440\u044F\u0434 \u043A\u043E\u043B-\u0432\u043E ",u("span",{children:n.value1})," \u0432\u0440\u0435\u043C\u044F\xA0",u("span",{children:n.value2})," \u0441\u0435\u043A \u0438\u043D\u0442\u0435\u0440\u0432\u0430\u043B\xA0",u("span",{children:n.value3})," \u0441\u0435\u043A"]})]})]}),u(p,{sx:{display:"flex",flexWrap:{xs:"wrap",sm:"nowrap"},flexGrow:1,justifyContent:"center",ml:1},children:u(f,{variant:"outlined",size:"small",onClick:()=>e(n),children:"\u0443\u0434\u0430\u043B\u0438\u0442\u044C"})})]});var Ve=W(Ke);const Xe=({action:n,onSubmit:e,onCloseDialog:t})=>{const s=o.exports.useMemo(()=>({id:C.actionTypes[0].id,name:C.actionTypes[0].name}),[]),a=o.exports.useMemo(()=>({id:null,type:s,value1:0,value2:0,value3:0}),[]),[i,l]=o.exports.useState(n||a),[c,y]=o.exports.useState(()=>C.actionTypes.find(h=>h.id===i.type.id)),x=h=>{let w=h.target.value;i.type.id!==C.ACTION.ACTION_SLOPE&&(w=w.replace(/-/g,""));let m={};switch(h.target.dataset.source){case"value1":m={value1:w};break;case"value2":m={value2:w};break;case"value3":m={value3:w};break}l(()=>g(g({},i),m))},E=h=>{const w=h.target.value;y(w),l(N(g({},i),{type:{id:w.id,name:w.name},value1:0,value2:0,value3:0}))},k=o.exports.useMemo(()=>C.actionTypes.map(h=>u(Cu,{value:h,children:h.name},h.id)),[]),F=()=>{const h=g({},i);return h.value1=h.type.id===C.ACTION.ACTION_SPARK?Number(String(h.value1).split(".")[0]):Number((+h.value1).toFixed(1)),h.value2=Number((+h.value2).toFixed(1)),h.value3=Number((+h.value3).toFixed(1)),g({},h)};return r(T,{children:[u(Z,{children:u(d,{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435"})}),u(q,{children:r(p,{sx:{display:"flex",flexDirection:"column"},children:[u(Q,{fullWidth:!0,sx:au.gutters,children:u(yu,{autoFocus:!0,value:c,onChange:E,children:k})}),u(Q,{fullWidth:!0,children:u(z,{label:c.value1.label,value:i.value1,onChange:x,type:"number",inputProps:{"data-source":"value1",max:c.value1.max,min:c.value1.min,step:c.value1.step},sx:au.gutters,InputLabelProps:{shrink:!0}})}),c.id===C.ACTION.ACTION_SPARK&&u(z,{label:c.value2.label,value:i.value2,onChange:x,type:"number",inputProps:{"data-source":"value2",max:c.value2.max,min:c.value2.min,step:c.value2.step},sx:au.gutters,InputLabelProps:{shrink:!0}}),c.id===C.ACTION.ACTION_SPARK&&u(z,{label:c.value3.label,value:i.value3,onChange:x,type:"number",inputProps:{"data-source":"value3",max:c.value3.max,min:c.value3.min,step:c.value3.step},sx:au.gutters,InputLabelProps:{shrink:!0}})]})}),r(J,{children:[u(f,{onClick:t,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(f,{onClick:()=>e(F()),children:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})]})]})},au={gutters:{my:1}};var Ze=W(Xe);const qe=()=>{var O;const n=zu(),e=G(),[t,s]=o.exports.useState(!1),[a,i]=o.exports.useState(null),[l,c]=o.exports.useState({}),[y,x]=o.exports.useState(!1),[E,k]=o.exports.useState(null),F=o.exports.useCallback(()=>{e("/tasks")},[]);o.exports.useEffect(()=>{V.fetchById(n.id).then(v=>c(v))},[]);const h=o.exports.useCallback(()=>{s(!1)},[]),w=o.exports.useCallback(v=>{i(v),s(!0)},[]),m=o.exports.useCallback(()=>{i(null),s(!0)},[]),$=v=>{k(v),x(!0)},A=()=>{if(E){const v=l.actions.filter(I=>E.id!==I.id),L=N(g({},l),{actions:v});c(L),V.update(L).then(()=>{k(null)})}x(!1)},X=()=>{k(null),x(!1)},iu=v=>{v.id||(v.id=Ku());const L=l.actions.findIndex(eu=>eu.id===v.id),I=[...l.actions];L===-1?I.push(v):I[L]=g({},v);const _=N(g({},l),{actions:[...I]});c(_),s(!1),V.update(_)},B=Array.isArray(l.actions)?l.actions.map(v=>u(Ve,{action:v,onRemove:$,onEdit:w},v.id)):null;return r(p,{sx:{bgcolor:"#f9f9f9",padding:1,minHeight:"98%"},children:[r(p,{sx:{display:"flex",justifyContent:"space-between",width:"80%",flexWrap:"wrap"},children:[u(d,{variant:"h5",children:"\u0421\u043E\u0441\u0442\u0430\u0432 \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u044B"}),r(p,{children:[u(f,{variant:"contained",color:"primary",onClick:F,sx:{mr:1},children:"\u041A \u0441\u043F\u0438\u0441\u043A\u0443"}),u(f,{variant:"contained",color:"primary",onClick:m,children:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"})]})]}),u(p,{children:u(d,{variant:"h6",sx:{fontStyle:"italic",color:"blue",my:1},children:`\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435: ${l.name||""}`})}),B&&B.length<=0&&u(p,{sx:{my:10,fontWeight:"bold",display:"flex",width:"100%",justifyContent:"center",alignItems:"center"},children:"\u0421\u043F\u0438\u0441\u043E\u043A \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439 \u043F\u0443\u0441\u0442"}),u(U,{children:B}),u(uu,{open:t,onCloseDialog:h,children:u(Ze,{open:t,onCloseDialog:h,onSubmit:iu,action:a})}),r(pu,{open:y,onOk:A,onCancel:X,children:[u(d,{sx:{mb:2},children:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u043E\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435?"}),u(d,{align:"center",sx:{fontWeight:"bold"},children:(O=E==null?void 0:E.type)==null?void 0:O.name})]})]})};var Je=W(qe);const Qe=()=>{o.exports.useEffect(()=>{b.fetch()},[]);const n=t=>{b.update(g({},t))},e=b.settingList.map(t=>{let s=!0;return t.id===b.SETTING.SETTING_VERSION&&(s=!1),u(Tu,{setting:t,onEdit:n,editable:s},t.id)});return u(T,{children:u(U,{sx:{mb:2},children:e})})};var Ye=W(Qe);const u4=({openDialog:n,openConfirm:e,disableAll:t})=>r(T,{children:[u(f,{disabled:t,variant:"contained",color:"primary",onClick:()=>{e("update")},sx:{mr:1,mb:1},children:"\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u0430"}),u(f,{disabled:t,variant:"contained",color:"primary",onClick:()=>{e("shutdown")},sx:{mr:1,mb:1},children:"\u0412\u044B\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u043E"}),u(f,{disabled:t,variant:"contained",color:"primary",onClick:()=>{n("azimuth")},sx:{mr:1,mb:1},children:"\u041A\u0430\u043B\u0438\u0431\u0440\u043E\u0432\u043A\u0430 \u0430\u0437\u0438\u043C\u0443\u0442\u0430"}),u(f,{disabled:t,variant:"contained",color:"primary",onClick:()=>{n("slope")},sx:{mr:1,mb:1},children:"\u041A\u0430\u043B\u0438\u0431\u0440\u043E\u0432\u043A\u0430 \u043D\u0430\u043A\u043B\u043E\u043D\u0430"})]}),e4=[{description:'\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u043E \u043D\u0430 \u0430\u0437\u0438\u043C\u0443\u0442 0 \u0438 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 "\u0414\u0430\u043B\u0435\u0435".',time:0},{description:`\u041F\u043E\u0432\u043E\u0440\u043E\u0442 \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 5 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0430\u0437\u0438\u043C\u0443\u0442\u0430.`,time:5},{description:`\u041F\u043E\u0432\u043E\u0440\u043E\u0442 \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 10 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0430\u0437\u0438\u043C\u0443\u0442\u0430.`,time:10},{description:`\u041F\u043E\u0432\u043E\u0440\u043E\u0442 \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 15 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0430\u0437\u0438\u043C\u0443\u0442\u0430.`,time:15}],t4=[{description:'\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435 \u043D\u0430\u043A\u043B\u043E\u043D \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0430 \u043D\u0430 0 \u0438 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 "\u0414\u0430\u043B\u0435\u0435".',time:0},{description:`\u041D\u0430\u043A\u043B\u043E\u043D \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 2 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0443\u0433\u043B\u0430 \u043D\u0430\u043A\u043B\u043E\u043D\u0430.`,time:2},{description:`\u041D\u0430\u043A\u043B\u043E\u043D \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 4 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0443\u0433\u043B\u0430 \u043D\u0430\u043A\u043B\u043E\u043D\u0430.`,time:4},{description:`\u041D\u0430\u043A\u043B\u043E\u043D \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 6 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0443\u0433\u043B\u0430 \u043D\u0430\u043A\u043B\u043E\u043D\u0430.`,time:6}],n4=({onCancel:n,mode:e})=>{const[t,s]=o.exports.useState(0),[a,i]=o.exports.useState(!1);let l="",c=[];switch(e){case"azimuth":l="\u041A\u0430\u043B\u0438\u0431\u0440\u043E\u0432\u043A\u0430 \u0430\u0437\u0438\u043C\u0443\u0442\u0430",c=e4;break;case"slope":l="\u041A\u0430\u043B\u0438\u0431\u0440\u043E\u0432\u043A\u0430 \u043D\u0430\u043A\u043B\u043E\u043D\u0430",c=t4;break}const y=c.length,[x,E]=o.exports.useState(new Array(y).fill(0)),[k,F]=o.exports.useState(new Array(y).fill(0)),h=(B,O=3)=>Number(B.toFixed(O)),w=()=>{D.stopCurrent(),i(!0);const B=c[t].time;let O=()=>{};switch(e){case"azimuth":O=b.calibrateAzimuth;break;case"slope":O=b.calibrateSlope;break}O(B)},m=()=>{D.stopCurrent(),n()},$=B=>{const O=+B.target.value,v=[...x],L=[...k];v[t]=O;let I=h((O-v[t-1])/c[t].time);I=I<=0?0:I,L[t]=I,E(v),F(L)},A=()=>{D.stopCurrent();const B=[0];for(let _=1;_<c.length;_++){const eu=h((x[_]-x[_-1])/c[_].time);B.push(eu)}const O=B.reduce((_,eu)=>_+eu),v=h(O/(c.length-1));let L={},I={};switch(e){case"azimuth":L=N(g({},b.settingList[0]),{value:v}),I=N(g({},b.settingList[2]),{value:x[x.length-1]});break;case"slope":L=N(g({},b.settingList[1]),{value:v}),I=N(g({},b.settingList[3]),{value:x[x.length-1]});break}v>0&&(b.update(L),b.update(I)),n()},X=()=>{s(B=>B+1),i(!1)},iu=()=>{s(B=>B-1),i(!1)};return r(T,{children:[u(Z,{children:u(d,{children:l})}),u(q,{children:r(p,{sx:{display:"flex",flexDirection:"column"},children:[u(p,{sx:{p:2},children:c[t].description}),t!==0&&r(Q,{children:[u(f,{onClick:w,variant:"contained",color:"primary",disabled:a,sx:{width:{md:"50%",xl:"25%"},mb:1,ml:1},children:"\u0421\u0442\u0430\u0440\u0442"}),u(z,{sx:{m:1},label:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435",type:"number",inputProps:{max:350,min:0,step:.1},value:x[t],onChange:$,InputLabelProps:{shrink:!0}}),r(d,{sx:{mx:1},children:["\u0421\u043A\u043E\u0440\u043E\u0441\u0442\u044C: ",k[t]]})]}),u(Vu,{sx:{justifySelf:"flex-end"},variant:"text",steps:y,position:"static",activeStep:t,nextButton:r(f,{size:"small",onClick:X,disabled:t===y-1,children:["\u0414\u0430\u043B\u0435\u0435",u(Xu,{})]}),backButton:r(f,{size:"small",onClick:iu,disabled:t===0,children:[u(Zu,{}),"\u041D\u0430\u0437\u0430\u0434"]})})]})}),r(J,{children:[u(f,{onClick:m,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(f,{onClick:A,children:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})]})]})},s4=({disableAll:n})=>{const e=o.exports.useRef();return u(T,{children:r(p,{sx:{display:"flex",width:"100%",flexWrap:"wrap"},children:[u(f,{disabled:n,variant:"contained",color:"primary",onClick:()=>{b.backup()},sx:{mr:1,mb:1},children:"\u0420\u0435\u0437\u0435\u0440\u0432\u043D\u0430\u044F \u043A\u043E\u043F\u0438\u044F \u0411\u0414"}),u(p,{children:r("label",{htmlFor:"upload",children:[u("input",{ref:e,style:{display:"none"},id:"upload",name:"upload",type:"file",onInput:a=>{var i=new FileReader;i.readAsText(a.target.files[0]),i.onloadend=function(l){b.restore(l.target.result).then(c=>{console.log(c)})}}}),u(f,{disabled:n,variant:"contained",color:"primary",component:"span",sx:{mr:1,mb:1},children:"\u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u0411\u0414"})]})})]})})},r4=()=>{const[n,e]=o.exports.useState(!1),[t,s]=o.exports.useState(!1),[a,i]=o.exports.useState("azimuth"),[l,c]=o.exports.useState(""),[y,x]=o.exports.useState(""),[E,k]=o.exports.useState(!1),F=A=>{i(A),e(!0)},h=A=>{c(A);let X="";switch(A){case"update":X=`\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u0437\u0430\u0439\u043C\u0435\u0442 3-5 \u043C\u0438\u043D\u0443\u0442.
                   \u0412 \u044D\u0442\u043E \u0432\u0440\u0435\u043C\u044F \u0441\u0435\u0440\u0432\u0435\u0440 \u0431\u0443\u0434\u0435\u0442 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D.
                   \u041D\u0435 \u043E\u0442\u043A\u043B\u044E\u0447\u0430\u0439\u0442\u0435 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u043E \u043E\u0442 \u043F\u0438\u0442\u0430\u043D\u0438\u044F.

                   \u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C?
        `;break;case"shutdown":X=`\u0412\u044B\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0441\u0435\u0440\u0432\u0435\u0440?
        `;break}x(()=>X),s(!0),k(!0)},w=()=>{let A=()=>{};switch(l){case"update":A=b.updateServer;break;case"shutdown":A=b.shutdown;break}A(),s(!1)},m=()=>{e(!1)},$=()=>{s(!1),k(!1)};return r(T,{children:[u(d,{variant:"h6",children:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438"}),u(Ye,{}),u(u4,{openDialog:F,openConfirm:h,disableAll:E}),u(s4,{disableAll:E}),u(uu,{open:n,onCloseDialog:m,children:u(n4,{onCancel:m,mode:a})}),r(uu,{open:t,onCloseDialog:$,children:[u(Z,{children:u(d,{children:"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F"})}),u(q,{children:y}),r(J,{children:[u(f,{onClick:$,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(f,{onClick:w,children:"Ok"})]})]})]})},a4=()=>r(T,{children:[u(d,{sx:{color:"red",border:"2px solid red",borderRadius:1,fontWeight:"bold",width:"80%",m:"10px auto",p:1},children:"\u0420\u0435\u043C\u043E\u043D\u0442"}),u(p,{sx:{bgcolor:"#f9f9f9",p:1,display:"flex",flexWrap:"wrap",justifyContent:"center"},children:u(f,{variant:"contained",color:"primary",onClick:()=>{b.repair()},children:"\u0421\u0442\u0430\u0440\u0442"})})]});var i4=W(a4);const j="/",o4=({routes:n})=>u(T,{children:u(qu,{children:u(pe,{children:u(Ju,{children:r(M,{path:`${j}`,element:u(oe,{}),children:[u(M,{path:`${j}`,element:u(Du,{})}),u(M,{path:`${j}remont`,element:u(i4,{})}),r(M,{path:`${j}tasks`,element:u(Ae,{}),children:[u(M,{path:`${j}tasks`,element:u(Ue,{})}),u(M,{path:`${j}tasks:id`,element:u(Je,{})})]}),r(M,{path:`${j}works`,element:u(Be,{}),children:[u(M,{path:`${j}works`,element:u(je,{})}),u(M,{path:"/works/current-work",element:u(ze,{})})]}),u(M,{path:`${j}settings`,element:u(r4,{})}),u(M,{path:"*",element:u(Du,{})})]})})})})});const nu=Qu(`ws://${location.hostname}`);nu.on("connect",()=>{console.log("socket ",nu.connected)});nu.on("workStatusUpdate",n=>{D.fetch(),D.fetchCurrentWork()});nu.on("serverTime",n=>{b.setServerTime(+n)});nu.on("settingsUpdate",n=>{b.fetch()});const l4=Yu({palette:{primary:{main:"#1976d2"},bgGray:{main:"#f9f9f9"}}},ue);ee.render(u(te.StrictMode,{children:u(ne,{theme:l4,children:u(se,{dateAdapter:re,locale:du,children:u(o4,{})})})}),document.getElementById("root"));
