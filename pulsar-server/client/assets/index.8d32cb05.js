var Ou=Object.defineProperty,Ru=Object.defineProperties;var Uu=Object.getOwnPropertyDescriptors;var vu=Object.getOwnPropertySymbols;var Nu=Object.prototype.hasOwnProperty,Mu=Object.prototype.propertyIsEnumerable;var hu=(s,u,t)=>u in s?Ou(s,u,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[u]=t,y=(s,u)=>{for(var t in u||(u={}))Nu.call(u,t)&&hu(s,t,u[t]);if(vu)for(var t of vu(u))Mu.call(u,t)&&hu(s,t,u[t]);return s},b=(s,u)=>Ru(s,Uu(u));var E=(s,u,t)=>(hu(s,typeof u!="symbol"?u+"":u,t),t);import{s as _u,j as e,O as mu,d as Pu,a as zu,b as Gu,c as ju,u as V,L as M,e as yu,A as Hu,C as fu,f as r,T as Vu,g as d,B as m,h as U,I as gu,i as Ku,k as Xu,D as Zu,l as qu,r as o,m as ru,n as S,o as iu,p as R,q as f,t as ku,F as W,v as K,w as X,x as J,y as z,z as Z,E as xu,M as Tu,S as wu,G as Ju,H as Su,J as Eu,K as Qu,N as Yu,P as ue,Q as ee,R as te,U as se,V as ne,W as _,X as re,Y as ie,Z as ae,_ as oe,$ as le,a0 as ce,a1 as de,a2 as pe}from"./vendor.f8c19e97.js";const he=function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}};he();const me=_u("main")({flexGrow:1,margin:10}),fe=()=>e(me,{children:e(mu,{})}),au="/";var Du=[{label:"\u0413\u043B\u0430\u0432\u043D\u0430\u044F",path:`${au}`,icon:e(Pu,{color:"primary"})},{label:"\u041F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u044B",path:`${au}tasks`,icon:e(zu,{color:"primary"})},{label:"\u0417\u0430\u0434\u0430\u0447\u0438",path:`${au}works`,icon:e(Gu,{color:"primary"})},{label:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438",path:`${au}settings`,icon:e(ju,{color:"primary"})}];const bu="Pulsar",xe=({toggleOpen:s})=>{const u=V(),t=Du.map(n=>e(M,{button:!0,onClick:()=>u(n.path,{replace:!0}),children:e(yu,{primary:n.label})},n.label));return e(Hu,{position:"fixed",children:e(fu,{maxWidth:"xl",children:r(Vu,{disableGutters:!0,children:[e(d,{variant:"h6",noWrap:!0,component:"h1",sx:Q.logoSm,children:bu}),e(m,{sx:Q.menu,children:e(U,{component:"nav",sx:Q.nav,children:t})}),e(m,{sx:Q.icon,children:e(gu,{size:"large","aria-label":"open menu","aria-controls":"menu-appbar","aria-haspopup":"true",color:"inherit",onClick:s,sx:Q.iconButton,children:e(Ku,{})})}),e(d,{variant:"h6",noWrap:!0,component:"h1",sx:Q.logoXs,children:bu})]})})})},Q={logoSm:{mr:2,display:{xs:"none",sm:"flex"}},logoXs:{flexGrow:1,justifyContent:"flex-end",display:{xs:"flex",sm:"none"}},menu:{flexGrow:1,justifyContent:"flex-end",display:{xs:"none",sm:"flex"}},nav:{display:"flex",flexDirection:"row"},iconButton:{padding:"20px"},icon:{display:{xs:"flex",sm:"none"}}},Ce=({open:s,toggleOpen:u})=>{const t=V(),n=a=>{t(a,{replace:!0}),u()},i=Du.map(a=>r(M,{button:!0,onClick:()=>n(a.path),children:[e(Xu,{children:a.icon}),e(yu,{primary:a.label})]},a.label));return r(Zu,{sx:Au.drawer,open:s,onClose:u,children:[r(m,{sx:{display:{xs:"flex",sm:"none"}},children:[e(d,{children:"Pulsar"}),e(gu,{size:"large","aria-label":"open menu","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:u,sx:Au.closeButton,children:e(qu,{})})]}),e(U,{component:"nav",children:i})]})},Au={drawer:{width:300,"& .MuiDrawer-paper":{width:300,boxSizing:"border-box",top:"auto",padding:"10px 10px"}},closeButton:{color:"text.secondary"}},ve=s=>{const[u,t]=o.exports.useState(!!s);return[u,()=>{t(()=>!u)}]},ye=({children:s})=>{const[u,t]=ve(!1);return r(fu,{maxWidth:"100vw",disableGutters:!0,sx:Wu.container,children:[e(xe,{toggleOpen:t}),r(fu,{sx:Wu.content,disableGutters:!0,children:[e(Ce,{open:u,toggleOpen:t}),s]})]})},Wu={container:{display:"flex",flexDirection:"column",minHeight:"100vh"},content:{display:"flex",flexGrow:1,mt:8}},Bu=(s,u="dd-MM-yyyy - HH:mm")=>o.exports.useMemo(()=>s?ru(s,u):"",[s]),ge=`${location.protocol}//${location.hostname}`;class ke{async fetch(){return(await S.get(`${ge}/dictonary`)).data}}var Te=new ke;const we=Te;class Se{constructor(){E(this,"actionTypes",[]);E(this,"workTypes",[]);E(this,"statusTypes",[]);E(this,"WORK",{});E(this,"STATUS",{});E(this,"ACTION",{});iu(this),this.fetch()}fill(u){this.actionTypes=u.actionTypes,this.workTypes=u.workTypes,this.statusTypes=u.statusTypes,this.WORK=u.WORK,this.STATUS=u.STATUS,this.ACTION=u.ACTION}async fetch(){const u=await we.fetch();this.fill(u)}getStatus(u){return this.statusTypes.find(t=>t.id===u)}}const C=new Se,eu=`${location.protocol}//${location.hostname}`;class Ee{async fetch(){return(await S.get(`${eu}/settings`)).data}async getServerTime(){return(await S.get(`${eu}/settings/serverTime`)).data}async update(u){return await S.put(`${eu}/settings/${u.id}`,u)}async updateServer(){setTimeout(()=>{window.close()},2e3),await S.get(`${eu}/settings/updateServer`)}async shutdown(){setTimeout(()=>{window.close()},2e3),await S.get(`${eu}/settings/shutdown`)}}var De=new Ee;const tu=De;class be{constructor(){E(this,"settingList",[]);E(this,"SETTING",{});E(this,"serverTime","");iu(this)}setServerTime(u){this.serverTime=ru(u,"dd-MM-yyyy - HH:mm")}fill(u){this.settingList=u}fillSETTING(u){this.SETTING=u}async fetch(){const u=await tu.fetch();this.fill(u.settings),this.fillSETTING(u.SETTING),await tu.getServerTime()}async update(u){await tu.update(u);const t=[...this.settingList],n=t.findIndex(i=>i.id===u.id);t[n]=y({},u),this.fill(t)}async updateServer(){await tu.updateServer()}async shutdown(){await tu.shutdown()}}const D=new be,su=`${location.protocol}//${location.hostname}`;class Ae{async fetch(){return(await S.get(`${su}/tasks`)).data}async fetchById(u){return(await S.get(`${su}/tasks/${u}`)).data}async create(u){return(await S.post(`${su}/tasks`,u)).data}async remove(u){return(await S.delete(`${su}/tasks/${u}`)).data}async update(u){return await S.put(`${su}/tasks/${u.id}`,u)}}var We=new Ae;const nu=We;class Be{constructor(){E(this,"taskList",[]);iu(this)}fill(u){this.taskList=u}async remove(u){const t=await nu.remove(u.id);if(t.removed===1){const n=this.taskList.filter(i=>i.id!==u.id);this.fill(n)}return t.removed}async create(u){const t=await nu.create(u);this.fill([...this.taskList,t])}async update(u){await nu.update(u);let t=this.taskList.findIndex(n=>n.id===u.id);this.taskList[t]=y({},u)}async fetch(){this.fill(await nu.fetch())}async fetchById(u){return await nu.fetchById(u)}}const G=new Be,j=`${location.protocol}//${location.hostname}`;class $e{async fetch(){return(await S.get(`${j}/works`)).data}async fetchCurrentWork(){return(await S.get(`${j}/works/currentWork`)).data}async create(u){return(await S.post(`${j}/works`,u)).data}async remove(u){return(await S.delete(`${j}/works/${u}`)).data}async stopCurrent(u){return await S.get(`${j}/works/stopCurrent`)}async update(u){return await S.put(`${j}/works/${u.id}`,u)}async calibrateAzimuth(u){await S.get(`${j}/works/calibrateAzimuth?time=${u}`)}async calibrateSlope(u){await S.get(`${j}/works/calibrateSlope?time=${u}`)}}var Ie=new $e;const $u=[{id:1,type:{id:1,name:"\u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0430"},status:{id:1,name:"\u043E\u0436\u0438\u0434\u0430\u043D\u0438\u0435"},item:{id:2,name:"\u0412\u0442\u043E\u0440\u0430\u044F \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0430",description:"\u041A\u0440\u0430\u0442\u043A\u043E\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0432\u0442\u043E\u0440\u043E\u0439 \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u044B",actions:[{id:1,type:{id:1,name:"\u0443\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0430 \u0430\u0437\u0438\u043C\u0443\u0442\u0430"},value1:120.9,value2:0,value3:0},{id:2,type:{id:3,name:"\u043E\u0436\u0438\u0434\u0430\u043D\u0438\u0435"},value1:200,value2:0,value3:0},{id:3,type:{id:4,name:"\u0440\u0430\u0437\u0440\u044F\u0434"},value1:3,value2:2.5,value3:5}]},startTime:1645191e6,details:[]},{id:2,type:{id:1,name:"\u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0430"},status:{id:1,name:"\u043E\u0436\u0438\u0434\u0430\u043D\u0438\u0435"},item:{id:2,name:"\u0412\u0442\u043E\u0440\u0430\u044F \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0430",description:"\u041A\u0440\u0430\u0442\u043A\u043E\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0432\u0442\u043E\u0440\u043E\u0439 \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u044B",actions:[{id:1,type:{id:1,name:"\u0443\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0430 \u0430\u0437\u0438\u043C\u0443\u0442\u0430"},value1:120.9,value2:0,value3:0},{id:2,type:{id:3,name:"\u043E\u0436\u0438\u0434\u0430\u043D\u0438\u0435"},value1:200,value2:0,value3:0},{id:3,type:{id:4,name:"\u0440\u0430\u0437\u0440\u044F\u0434"},value1:3,value2:2.5,value3:5}]},startTime:16457166e5,details:[]}];class Fe{constructor(){E(this,"currentWork",null);E(this,"updateWork",null)}setUpdaters(u){this.updateWork=u}createCurrentWork(u){}async startWork(u){this.currentWork=u;const t=await C.getStatus(C.STATUS.STATUS_RUN);this.currentWork=b(y({},this.currentWork),{status:t}),await this.updateWork(this.currentWork),console.log("status ",C.STATUS.STATUS_RUN)}async stopWork(){const u=await C.getStatus(C.STATUS.STATUS_DONE);this.currentWork=b(y({},this.currentWork),{status:u}),await this.updateWork(this.currentWork),this.currentWork=null,console.log("stop")}}var ou=new Fe;let Iu=$u.length+1;class Le{constructor(){E(this,"works",$u);E(this,"timers",[]);E(this,"update",async u=>{const t=this.works.findIndex(n=>n.id===u.id);this.works[t]=y({},u)});ou.setUpdaters(this.update),this.fillTimers()}createTimer(u){const t=new Date().getTime(),n=u.startTime;if(!n)return null;const i=n-t,a=i<0?null:setTimeout(()=>{console.log("timer run",u.id),ou.startWork(u),this.removeTimer(u.id),clearTimeout(a)},i);return a}removeTimer(u){const t=this.timers.find(n=>n.workId===u);t&&(clearTimeout(t),this.timers=this.timers.filter(n=>n.workId===u))}fillTimers(){this.timers.forEach(u=>clearTimeout(u.timer)),this.timers=[],this.works.forEach(u=>{const t=this.createTimer(u);t&&this.timers.push({timerId:t,workId:u.id})})}async fetch(){return this.works}async create(u){Iu++;const t=y({id:Iu},u);return this.works.push(t),this.createTimer(t)||ou.startWork(t),t}async remove(u){return this.works=this.works.filter(t=>t.id!==u),ou.stopWork(),this.removeTimer(u),{removed:1,error:""}}}new Le;const q=Ie;class Oe{constructor(){E(this,"workList",[]);E(this,"currentWork",null);iu(this)}fill(u){this.workList=u}fillCurrentWork(u){u.length>0?this.currentWork=u[0]:this.currentWork=null}async fetch(){const u=await q.fetch();this.fill(u)}async fetchCurrentWork(){const u=await q.fetchCurrentWork();this.fillCurrentWork(u)}async create(u){const t=await q.create(u);this.fill([...this.workList,t])}async stopCurrent(u){return await q.stopCurrent()}async calibrateAzimuth(u){return await q.calibrateAzimuth(u)}async calibrateSlope(u){return await q.calibrateSlope(u)}async remove(u){const t=await q.remove(u.id);if(t.removed===1){const n=this.workList.filter(i=>i.id!==u.id);this.fill(n)}return t.removed}}const w=new Oe,Re=()=>{var l;o.exports.useEffect(()=>{w.fetch()},[]);const s=V(),u=o.exports.useCallback(()=>{s("/works/current-work")},[]),t=o.exports.useCallback(()=>{w.stopCurrent()},[]),n=w.workList.filter(p=>p.status.id===C.STATUS.STATUS_WAIT).map(p=>{const x=Bu(p.startTime);return r(M,{children:[p.item.name," ",x]},p.id)}),i=w.workList.filter(p=>p.status.id===C.STATUS.STATUS_RUN).map(p=>e(M,{children:p.item.name},p.id));let a=[];const c=(l=w.currentWork)==null?void 0:l.work;return c&&(a=c.details.filter(p=>p.status.id===C.STATUS.STATUS_RUN).map(p=>e(M,{children:p.type.name},p.id))),r(m,{sx:{borderWidth:"1px",borderStyle:"solid",borderColor:"black",borderRadius:"5px",minHeight:"98%",p:.5,m:.5},children:[e(d,{children:"\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E \u0437\u0430\u0434\u0430\u043D\u0438\u044F\u0445"}),r(m,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",bgcolor:"#cdcdcd",p:1,my:2,flexWrap:"wrap"},children:[e(d,{variant:"span",children:"\u0417\u0430\u043F\u043B\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0435"}),n.length===0&&e(d,{variant:"span",children:"\u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044E\u0442"}),n.length!==0&&e(U,{children:n})]}),r(m,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",bgcolor:"#cdcdcd",p:1,mb:2},children:[e(d,{variant:"span",children:"\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u0437\u0430\u0434\u0430\u0447\u0430 "}),i.length===0&&e(d,{variant:"span",children:"\u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442"}),i.length!==0&&e(U,{children:i})]}),r(m,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:1,bgcolor:"#cdcdcd"},children:[e(d,{variant:"span",children:"\u0422\u0435\u043A\u0443\u0449\u0435\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435"}),a.length===0&&e(d,{variant:"span",children:"\u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442"}),a.length!==0&&e(U,{children:a})]}),r(m,{sx:{display:"flex",bgcolor:"#cdcdcd"},children:[e(f,{variant:"contained",color:"primary",onClick:u,sx:{m:1},children:"\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u0435\u0435"}),e(f,{variant:"contained",color:"primary",onClick:t,sx:{m:1},children:"\u041E\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C"})]})]})};var Ue=R(Re);const Y=s=>{const{open:u,onCloseDialog:t,children:n}=s;return e(ku,{open:u,onClose:t,sx:{"& .MuiPaper-root":{width:{xs:"98%",sm:"50%"}}},children:n})},Ne=({setting:s,onCancel:u,onSubmit:t})=>{const[n,i]=o.exports.useState(y({},s)),a=c=>{const l=+c.target.value;i(b(y({},n),{value:l}))};return r(W,{children:[e(K,{children:e(d,{children:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u0430"})}),e(X,{children:e(m,{sx:{display:"flex",flexDirection:"column"},children:e(J,{children:e(z,{autoFocus:!0,sx:{m:1},label:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435",type:"number",inputProps:{max:350,min:0,step:.1},value:n.value,onChange:a,InputLabelProps:{shrink:!0}})})})}),r(Z,{children:[e(f,{onClick:u,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e(f,{onClick:()=>t(n),children:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})]})]})},Fu=({setting:s,onEdit:u,editable:t=!0})=>{const[n,i]=o.exports.useState(!1),a=()=>{i(!0)},c=()=>{i(!1)},l=p=>{u(y({},p)),c()};return r(W,{children:[r(M,{sx:{justifyContent:"space-between",wordWrap:"wrap",bgcolor:"#f9f9f9"},children:[e(d,{sx:{width:"40%"},children:s.name}),r(m,{sx:{width:"60%",display:"flex",justifyContent:"space-between"},children:[e(d,{sx:{width:"50%",display:"flex",justifyContent:"center",fontSize:"1.5rem",color:"blue"},children:s.value}),t&&e(f,{onClick:a,children:"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C"})]})]},s.id),e(Y,{open:n,onCloseDialog:c,children:e(Ne,{onCancel:c,onSubmit:l,setting:s})})]})},Me=()=>{o.exports.useEffect(()=>{D.fetch()},[]);const s=D.settingList.filter(u=>u.id!==D.SETTING.SETTING_AZIMUTH_SPEED&&u.id!==D.SETTING.SETTING_SLOPE_SPEED).map(u=>e(Fu,{setting:u,editable:!1},u.id));return r(m,{sx:{borderWidth:"1px",borderStyle:"solid",borderColor:"black",borderRadius:"5px",minHeight:"98%",p:.5,m:.5},children:[e(d,{children:"\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E\u0431 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0435"}),r(m,{sx:{display:"flex",justifyContent:"space-between",px:2,mt:2,color:"blue"},children:[e(d,{variant:"div",children:"\u0412\u0440\u0435\u043C\u044F \u0441\u0435\u0440\u0432\u0435\u0440\u0430"}),e(d,{variant:"div",children:D.serverTime})]}),e(U,{sx:{mb:2},children:s})]})};var _e=R(Me);const Pe=()=>r(W,{children:[e(d,{sx:{color:"red",border:"2px solid red",borderRadius:1,fontWeight:"bold",width:"80%",m:"10px auto",p:1},children:"\u0412\u041D\u0418\u041C\u0410\u041D\u0418\u0415!!! \u041F\u0435\u0440\u0435\u0434 \u0440\u0430\u0431\u043E\u0442\u043E\u0439 \u043F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435 \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E\u0432\u0442\u044C \u0432\u044B\u0441\u0442\u0430\u0432\u043B\u0435\u043D\u043D\u043E\u0433\u043E \u0430\u0437\u0438\u043C\u0443\u0442\u0430 \u0438 \u043D\u0430\u043A\u043B\u043E\u043D\u0430!!!"}),r(m,{sx:{bgcolor:"#f9f9f9",p:1,minHeight:"85%",display:"flex",flexWrap:"wrap",justifyContent:"center"},children:[e(m,{sx:{padding:1,width:{xs:"100%",sm:"45%"},minHeight:"95%"},children:e(Ue,{})}),e(m,{sx:{padding:1,width:{xs:"100%",sm:"45%"},minHeight:"95%"},children:e(_e,{})})]})]}),ze=()=>e(W,{children:e(mu,{})}),Ge=()=>e(W,{children:e(mu,{})}),je=({task:s,onSubmit:u,onCancel:t})=>{const n=o.exports.useMemo(()=>C.workTypes.find(h=>h.id===C.WORK.WORK_PROGRAMM),[]),i=o.exports.useMemo(()=>C.statusTypes.find(h=>h.id===C.STATUS.STATUS_RUN),[]),a=o.exports.useMemo(()=>({type:n,status:i,item:s,startTime:null,details:[]}),[]),[c,l]=o.exports.useState(a),[p,x]=o.exports.useState(i),[k,A]=o.exports.useState(ru(new Date,"yyyy-MM-dd'T'HH:mm",{locale:xu})),F=h=>{const B=ru(h,"yyyy-MM-dd'T'HH:mm",{locale:xu}),P=Su(Eu(B));A(B),l(b(y({},c),{startTime:P}))},T=h=>{const B=h.target.value;let P=null;x(B),B.id===C.STATUS.STATUS_WAIT&&(P=Su(Eu(k))),l(b(y({},c),{status:B,startTime:P}))},v=o.exports.useMemo(()=>C.statusTypes.map(h=>(h.id===C.STATUS.STATUS_RUN||h.id===C.STATUS.STATUS_WAIT)&&e(Tu,{value:h,children:h.name},h.id)),[]);return r(W,{children:[e(K,{children:e(d,{children:"\u0417\u0430\u0434\u0430\u043D\u0438\u0435"})}),e(X,{children:r(m,{sx:{display:"flex",flexDirection:"column"},children:[e(J,{fullWidth:!0,sx:He.gutters,children:e(wu,{autoFocus:!0,value:p,onChange:T,children:v})}),p.id===C.STATUS.STATUS_WAIT&&e(J,{children:e(Ju,{value:k,onChange:F,renderInput:h=>e(z,y({},h))})})]})}),r(Z,{children:[e(f,{onClick:t,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e(f,{onClick:()=>u(c),children:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})]})]})},He={gutters:{my:1}};var Ve=R(je);const Ke=({task:s,onSelect:u,onRemove:t})=>{const[n,i]=o.exports.useState(!1),a=V(),c=()=>{i(!0)},l=()=>{i(!1)},p=async x=>{await w.create(x),i(!1),x.status.id===C.STATUS.STATUS_RUN&&a("/works/current-work")};return r(W,{children:[r(M,{sx:{color:"text.primary",mb:.5,p:.2,width:"auto"},children:[r(m,{sx:{display:"flex",bgcolor:"#ffffff",width:"80%",border:"1px solid #001e3c",borderRadius:"2px",cursor:"pointer",flexWrap:"wrap","&:hover":{bgcolor:"#f1f1f1",color:"text.secondary"},alignItems:"center"},onClick:()=>u(s.id),children:[e(d,{variant:"p",component:"span",sx:{width:{xs:"100%",sm:"40%"},padding:1},children:s.name}),e(d,{variant:"p",component:"span",sx:{padding:1,fontSize:"caption.fontSize"},children:s.description})]}),r(m,{sx:{display:"flex",flexWrap:{xs:"wrap",sm:"nowrap"},flexGrow:1,justifyContent:"center",ml:1},children:[e(f,{variant:"outlined",size:"small",sx:{mr:{xs:0,sm:.5},mb:{xs:.5,sm:0}},onClick:c,children:"\u0437\u0430\u043F\u0443\u0441\u043A"}),e(f,{variant:"outlined",size:"small",onClick:()=>t(s),children:"\u0443\u0434\u0430\u043B\u0438\u0442\u044C"})]})]}),e(Y,{open:n,onCloseDialog:l,children:e(Ve,{onCancel:l,onSubmit:p,task:s})})]})};var Xe=R(Ke);const Cu=({open:s,children:u,onOk:t,onCancel:n})=>e(m,{sx:{display:"flex",justifyContent:"space-between",width:"80%",flexWrap:"wrap"},children:r(ku,{open:s,onClose:n,children:[e(K,{}),e(X,{children:u}),r(Z,{children:[e(f,{onClick:n,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e(f,{onClick:t,children:"Ok"})]})]})}),Ze=s=>{const[u,t]=o.exports.useState(!1),[n,i]=o.exports.useState("");return[u,n,c=>{t(c),i(c?s:"")}]},qe=({open:s,onAddTask:u,onCloseDialog:t})=>{const[n,i,a]=Ze("\u0418\u043C\u044F \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C."),[c,l]=o.exports.useState(""),[p,x]=o.exports.useState(""),k=T=>{x(T.target.value)},A=T=>{const v=T.target.value;a(!v),l(T.target.value)},F=()=>{if(!c){a(!0);return}u({name:c,description:p})};return o.exports.useEffect(()=>{s&&(l(""),a(!1),x(""))},[s]),r(W,{children:[e(K,{children:e(d,{children:"\u041D\u043E\u0432\u0430\u044F \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0430"})}),e(X,{children:r(m,{sx:{display:"flex",flexDirection:"column"},children:[e(z,{autoFocus:!0,error:n,label:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",value:c,helperText:i,variant:"filled",onChange:A,sx:{mb:1}}),e(z,{label:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",value:p,variant:"filled",multiline:!0,maxRows:4,onChange:k})]})}),r(Z,{children:[e(f,{onClick:t,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e(f,{onClick:F,children:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"})]})]})},Je=()=>{const s=V(),[u,t]=o.exports.useState(!1),[n,i]=o.exports.useState(!1),[a,c]=o.exports.useState(null),l=o.exports.useCallback(h=>{s(`/tasks/${h}`)},[]);o.exports.useEffect(()=>G.fetch(),[]);const p=o.exports.useCallback(()=>{t(!1)},[]),x=o.exports.useCallback(()=>{t(!0)},[]),k=h=>{c(h),i(!0)},A=()=>{a&&G.remove(a).then(()=>{c(null)}),i(!1)},F=()=>{c(null),i(!1)},T=o.exports.useCallback(h=>{G.create(b(y({},h),{actions:[]})),p()},[]),v=o.exports.useMemo(()=>G.taskList.map(h=>e(Xe,{task:h,onSelect:l,onRemove:k},h.id)),[G.taskList]);return r(m,{sx:{bgcolor:"#f9f9f9",padding:1,minHeight:"98%"},children:[r(m,{sx:{display:"flex",justifyContent:"space-between",width:"80%",flexWrap:"wrap"},children:[e(d,{variant:"h5",children:"\u0421\u043F\u0438\u0441\u043E\u043A \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C"}),e(f,{variant:"contained",color:"primary",onClick:x,children:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"})]}),e(U,{children:v}),e(Y,{open:u,onCloseDialog:p,children:e(qe,{open:u,onAddTask:T,onCloseDialog:p})}),r(Cu,{open:n,onOk:A,onCancel:F,children:[e(d,{sx:{mb:2},children:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u0443\u044E \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0443?"}),e(d,{align:"center",sx:{fontWeight:"bold"},children:a==null?void 0:a.name})]})]})};var Qe=R(Je);const Lu=(s,u="#f1f1f1")=>o.exports.useMemo(()=>{switch(s.id){case C.STATUS.STATUS_RUN:return"#ffffe6";case C.STATUS.STATUS_DONE:return"#e8ffe6";default:return u}},[s]),Ye=({work:s,onSelect:u,onRemove:t})=>{const n=Lu(s.status),i=Bu(s.startTime);return r(M,{sx:{color:"text.primary",mb:.5,p:.2,width:"auto"},children:[r(m,{sx:{display:"flex",width:"80%",border:"1px solid #001e3c",borderRadius:"2px",cursor:"pointer",flexWrap:"wrap",bgcolor:n},children:[e(d,{variant:"p",component:"span",sx:{width:{xs:"100%",sm:"20%"},padding:1},children:s.status.name}),e(d,{variant:"p",component:"span",sx:{width:{xs:"100%",sm:"40%"},padding:1},children:s.item.name}),e(d,{variant:"p",component:"span",sx:{width:{xs:"100%",sm:"20%"},padding:1},children:i})]}),e(m,{sx:{display:"flex",flexWrap:{xs:"wrap",sm:"nowrap"},flexGrow:1,justifyContent:"center",ml:1},children:e(f,{variant:"outlined",size:"small",onClick:()=>t(s),children:"\u0443\u0434\u0430\u043B\u0438\u0442\u044C"})})]})};var u4=R(Ye);const e4=()=>{var p,x;V();const[s,u]=o.exports.useState(!1),[t,n]=o.exports.useState(null);o.exports.useEffect(()=>w.fetch(),[]);const i=k=>{n(k),u(!0)},a=()=>{t&&w.remove(t).then(()=>{n(null)}),u(!1)},c=()=>{n(null),u(!1)},l=o.exports.useMemo(()=>w.workList.map(k=>e(u4,{work:k,onRemove:i},k.id)),[w.workList]);return r(m,{sx:{bgcolor:"#f9f9f9",padding:1,minHeight:"98%"},children:[e(m,{sx:{display:"flex",justifyContent:"space-between",width:"80%",flexWrap:"wrap"},children:e(d,{variant:"h5",children:"\u0421\u043F\u0438\u0441\u043E\u043A \u0443\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u043D\u044B\u0445 \u0437\u0430\u0434\u0430\u0447"})}),e(U,{children:l}),r(Cu,{open:s,onOk:a,onCancel:c,children:[e(d,{sx:{mb:2},children:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u0443\u044E \u0437\u0430\u0434\u0430\u0447\u0443?"}),r(d,{align:"center",sx:{fontWeight:"bold"},children:[(p=t==null?void 0:t.status)==null?void 0:p.name," ",(x=t==null?void 0:t.item)==null?void 0:x.name]})]})]})};var t4=R(e4);const s4=({work:s})=>{const u=Lu(s.status);let t="";switch(s.type.id){case C.ACTION.ACTION_AZIMUTH:case C.ACTION.ACTION_SLOPE:t=s.value1+" \u0433\u0440\u0430\u0434.";break;case C.ACTION.ACTION_WAIT:t=s.value1+" \u0441\u0435\u043A.";break;case C.ACTION.ACTION_SPARK:t=s.value2+" \u0441\u0435\u043A.";break}return e(W,{children:r(M,{sx:{justifyContent:"space-between",flexWrap:"wrap",bgcolor:u,mb:1},children:[e(d,{sx:{width:{xs:"100%",sm:"15%",md:"15%"},fontWeight:"bold"},children:s.type.name}),e(d,{sx:{width:{xs:"100%",sm:"15%",md:"15%"},textAlign:{xs:"left",sm:"center"}},children:t})," ",e(d,{sx:{width:{xs:"100%",sm:"20%"},textAlign:{xs:"left",sm:"right"},fontWeight:"bold"},children:s.status.name})]},s.id)})},n4=()=>{var n;const s=o.exports.useCallback(()=>{w.stopCurrent()},[]);o.exports.useEffect(()=>{w.fetchCurrentWork()},[]);let u=null;const t=(n=w.currentWork)==null?void 0:n.work;return t&&(u=t.details.map(i=>e(s4,{work:i},i.id))),r(W,{children:[r(m,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",bgcolor:"#cdcdcd",px:1},children:[e(d,{variant:"h6",children:"\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u0437\u0430\u0434\u0430\u0447\u0430"}),e(m,{children:e(f,{variant:"contained",color:"primary",onClick:s,sx:{m:1},children:"\u041E\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C"})})]}),e(U,{children:u})]})};var r4=R(n4);const i4=({action:s,onRemove:u,onEdit:t})=>r(M,{sx:{color:"text.primary",mb:.5,p:.2,width:"auto"},children:[r(m,{sx:{display:"flex",bgcolor:"#ffffff",width:"80%",border:"1px solid #001e3c",borderRadius:"2px",flexWrap:"wrap",cursor:"pointer","&:hover":{bgcolor:"#f1f1f1",color:"text.secondary"}},onClick:()=>t(s),children:[e(d,{variant:"p",component:"span",sx:{width:{xs:"100%",sm:"40%"},padding:1},children:s.type.name}),r(d,{variant:"p",component:"span",sx:{padding:1},children:[s.type.id===1&&r(d,{children:["\u0430\u0437\u0438\u043C\u0443\u0442 ",e("span",{children:s.value1})," \u0433\u0440\u0430\u0434\u0443\u0441\u043E\u0432"]}),s.type.id===2&&r(d,{children:["\u043D\u0430\u043A\u043B\u043E\u043D ",e("span",{children:s.value1})," \u0433\u0440\u0430\u0434\u0443\u0441\u043E\u0432"]}),s.type.id===3&&r(d,{children:["\u043E\u0436\u0438\u0434\u0430\u043D\u0438\u0435 ",e("span",{children:s.value1})," \u0441\u0435\u043A"]}),s.type.id===4&&r(d,{children:["\u0440\u0430\u0437\u0440\u044F\u0434 \u043A\u043E\u043B-\u0432\u043E ",e("span",{children:s.value1})," \u0432\u0440\u0435\u043C\u044F\xA0",e("span",{children:s.value2})," \u0441\u0435\u043A \u0438\u043D\u0442\u0435\u0440\u0432\u0430\u043B\xA0",e("span",{children:s.value3})," \u0441\u0435\u043A"]})]})]}),e(m,{sx:{display:"flex",flexWrap:{xs:"wrap",sm:"nowrap"},flexGrow:1,justifyContent:"center",ml:1},children:e(f,{variant:"outlined",size:"small",onClick:()=>u(s),children:"\u0443\u0434\u0430\u043B\u0438\u0442\u044C"})})]});var a4=R(i4);const o4=({action:s,onSubmit:u,onCloseDialog:t})=>{const n=o.exports.useMemo(()=>({id:C.actionTypes[0].id,name:C.actionTypes[0].name}),[]),i=o.exports.useMemo(()=>({id:null,type:n,value1:0,value2:0,value3:0}),[]),[a,c]=o.exports.useState(s||i),[l,p]=o.exports.useState(()=>C.actionTypes.find(v=>v.id===a.type.id)),x=v=>{c(()=>b(y({},a),{value1:+v.target.value}))},k=v=>{c(()=>b(y({},a),{value2:+v.target.value}))},A=v=>{c(()=>b(y({},a),{value3:+v.target.value}))},F=v=>{const h=v.target.value;p(h),c(b(y({},a),{type:{id:h.id,name:h.name},value1:1,value2:0,value3:0}))},T=o.exports.useMemo(()=>C.actionTypes.map(v=>e(Tu,{value:v,children:v.name},v.id)),[]);return r(W,{children:[e(K,{children:e(d,{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435"})}),e(X,{children:r(m,{sx:{display:"flex",flexDirection:"column"},children:[e(J,{fullWidth:!0,sx:lu.gutters,children:e(wu,{autoFocus:!0,value:l,onChange:F,children:T})}),e(J,{fullWidth:!0,children:e(z,{label:l.value1.label,value:a.value1,onChange:x,type:"number",inputProps:{max:l.value1.max,min:l.value1.min,step:l.value1.step},sx:lu.gutters,InputLabelProps:{shrink:!0}})}),l.id===4&&e(z,{label:l.value2.label,value:a.value2,onChange:k,type:"number",inputProps:{max:l.value2.max,min:l.value2.min,step:l.value2.step},sx:lu.gutters,InputLabelProps:{shrink:!0}}),l.id===4&&e(z,{label:l.value3.label,value:a.value3,onChange:A,type:"number",inputProps:{max:l.value3.max,min:l.value3.min,step:l.value3.step},sx:lu.gutters,InputLabelProps:{shrink:!0}})]})}),r(Z,{children:[e(f,{onClick:t,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e(f,{onClick:()=>u(a),children:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})]})]})},lu={gutters:{my:1}};var l4=R(o4);const c4=()=>{var L;const s=Qu(),u=V(),[t,n]=o.exports.useState(!1),[i,a]=o.exports.useState(null),[c,l]=o.exports.useState({}),[p,x]=o.exports.useState(!1),[k,A]=o.exports.useState(null),F=o.exports.useCallback(()=>{u("/tasks")},[]);o.exports.useEffect(()=>{G.fetchById(s.id).then(g=>l(g))},[]);const T=o.exports.useCallback(()=>{n(!1)},[]),v=o.exports.useCallback(g=>{a(g),n(!0)},[]),h=o.exports.useCallback(()=>{a(null),n(!0)},[]),B=g=>{A(g),x(!0)},P=()=>{if(k){const g=c.actions.filter(I=>k.id!==I.id),O=b(y({},c),{actions:g});l(O),G.update(O).then(()=>{A(null)})}x(!1)},du=()=>{A(null),x(!1)},pu=g=>{g.id||(g.id=Yu());const O=c.actions.findIndex(uu=>uu.id===g.id),I=[...c.actions];O===-1?I.push(g):I[O]=y({},g);const N=b(y({},c),{actions:[...I]});l(N),n(!1),G.update(N)},$=Array.isArray(c.actions)?c.actions.map(g=>e(a4,{action:g,onRemove:B,onEdit:v},g.id)):null;return r(m,{sx:{bgcolor:"#f9f9f9",padding:1,minHeight:"98%"},children:[r(m,{sx:{display:"flex",justifyContent:"space-between",width:"80%",flexWrap:"wrap"},children:[e(d,{variant:"h5",children:"\u0421\u043E\u0441\u0442\u0430\u0432 \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u044B"}),r(m,{children:[e(f,{variant:"contained",color:"primary",onClick:F,sx:{mr:1},children:"\u041A \u0441\u043F\u0438\u0441\u043A\u0443"}),e(f,{variant:"contained",color:"primary",onClick:h,children:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"})]})]}),e(U,{children:$}),e(Y,{open:t,onCloseDialog:T,children:e(l4,{open:t,onCloseDialog:T,onSubmit:pu,action:i})}),r(Cu,{open:p,onOk:P,onCancel:du,children:[e(d,{sx:{mb:2},children:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u043E\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435?"}),e(d,{align:"center",sx:{fontWeight:"bold"},children:(L=k==null?void 0:k.type)==null?void 0:L.name})]})]})};var d4=R(c4);const p4=()=>{o.exports.useEffect(()=>{D.fetch()},[]);const s=t=>{D.update(y({},t))},u=D.settingList.map(t=>{let n=!0;return t.id===D.SETTING.SETTING_VERSION&&(n=!1),e(Fu,{setting:t,onEdit:s,editable:n},t.id)});return e(W,{children:e(U,{sx:{mb:2},children:u})})};var h4=R(p4);const m4=({openDialog:s,openConfirm:u})=>r(W,{children:[e(f,{variant:"contained",color:"primary",onClick:()=>{u("update")},sx:{mr:1,mb:1},children:"\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u0430"}),e(f,{variant:"contained",color:"primary",onClick:()=>{u("shutdown")},sx:{mr:1,mb:1},children:"\u0412\u044B\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u043E"}),e(f,{variant:"contained",color:"primary",onClick:()=>{s("azimuth")},sx:{mr:1,mb:1},children:"\u041A\u0430\u043B\u0438\u0431\u0440\u043E\u0432\u043A\u0430 \u0430\u0437\u0438\u043C\u0443\u0442\u0430"}),e(f,{variant:"contained",color:"primary",onClick:()=>{s("slope")},sx:{mr:1,mb:1},children:"\u041A\u0430\u043B\u0438\u0431\u0440\u043E\u0432\u043A\u0430 \u043D\u0430\u043A\u043B\u043E\u043D\u0430"})]}),f4=[{description:'\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u043E \u043D\u0430 \u0430\u0437\u0438\u043C\u0443\u0442 0 \u0438 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 "\u0414\u0430\u043B\u0435\u0435".',time:0},{description:`\u041F\u043E\u0432\u043E\u0440\u043E\u0442 \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 5 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0430\u0437\u0438\u043C\u0443\u0442\u0430.`,time:5},{description:`\u041F\u043E\u0432\u043E\u0440\u043E\u0442 \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 10 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0430\u0437\u0438\u043C\u0443\u0442\u0430.`,time:10},{description:`\u041F\u043E\u0432\u043E\u0440\u043E\u0442 \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 15 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0430\u0437\u0438\u043C\u0443\u0442\u0430.`,time:15}],x4=[{description:'\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435 \u043D\u0430\u043A\u043B\u043E\u043D \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0430 \u043D\u0430 0 \u0438 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 "\u0414\u0430\u043B\u0435\u0435".',time:0},{description:`\u041D\u0430\u043A\u043B\u043E\u043D \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 2 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0443\u0433\u043B\u0430 \u043D\u0430\u043A\u043B\u043E\u043D\u0430.`,time:2},{description:`\u041D\u0430\u043A\u043B\u043E\u043D \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 4 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0443\u0433\u043B\u0430 \u043D\u0430\u043A\u043B\u043E\u043D\u0430.`,time:4},{description:`\u041D\u0430\u043A\u043B\u043E\u043D \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 6 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0443\u0433\u043B\u0430 \u043D\u0430\u043A\u043B\u043E\u043D\u0430.`,time:6}],C4=({onCancel:s,mode:u})=>{const[t,n]=o.exports.useState(0),[i,a]=o.exports.useState(!1);let c="",l=[];switch(u){case"azimuth":c="\u041A\u0430\u043B\u0438\u0431\u0440\u043E\u0432\u043A\u0430 \u0430\u0437\u0438\u043C\u0443\u0442\u0430",l=f4;break;case"slope":c="\u041A\u0430\u043B\u0438\u0431\u0440\u043E\u0432\u043A\u0430 \u043D\u0430\u043A\u043B\u043E\u043D\u0430",l=x4;break}const p=l.length,[x,k]=o.exports.useState(new Array(p).fill(0)),[A,F]=o.exports.useState(new Array(p).fill(0)),T=($,L=3)=>Number($.toFixed(L)),v=()=>{w.stopCurrent(),a(!0);const $=l[t].time;let L=()=>{};switch(u){case"azimuth":L=w.calibrateAzimuth;break;case"slope":L=w.calibrateSlope;break}L($)},h=()=>{w.stopCurrent(),s()},B=$=>{const L=+$.target.value,g=[...x],O=[...A];g[t]=L;let I=T((L-g[t-1])/l[t].time);I=I<=0?0:I,O[t]=I,k(g),F(O)},P=()=>{w.stopCurrent();const $=[0];for(let N=1;N<l.length;N++){const uu=T((x[N]-x[N-1])/l[N].time);$.push(uu)}const L=$.reduce((N,uu)=>N+uu),g=T(L/(l.length-1));let O={},I={};switch(u){case"azimuth":O=b(y({},D.settingList[0]),{value:g}),I=b(y({},D.settingList[2]),{value:x[x.length-1]});break;case"slope":O=b(y({},D.settingList[1]),{value:g}),I=b(y({},D.settingList[3]),{value:x[x.length-1]});break}g>0&&(D.update(O),D.update(I)),s()},du=()=>{n($=>$+1),a(!1)},pu=()=>{n($=>$-1),a(!1)};return r(W,{children:[e(K,{children:e(d,{children:c})}),e(X,{children:r(m,{sx:{display:"flex",flexDirection:"column"},children:[e(m,{sx:{p:2},children:l[t].description}),t!==0&&r(J,{children:[e(f,{onClick:v,variant:"contained",color:"primary",disabled:i,sx:{width:{md:"50%",xl:"25%"},mb:1,ml:1},children:"\u0421\u0442\u0430\u0440\u0442"}),e(z,{sx:{m:1},label:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435",type:"number",inputProps:{max:350,min:0,step:.1},value:x[t],onChange:B,InputLabelProps:{shrink:!0}}),r(d,{sx:{mx:1},children:["\u0421\u043A\u043E\u0440\u043E\u0441\u0442\u044C: ",A[t]]})]}),e(ue,{sx:{justifySelf:"flex-end"},variant:"text",steps:p,position:"static",activeStep:t,nextButton:r(f,{size:"small",onClick:du,disabled:t===p-1,children:["\u0414\u0430\u043B\u0435\u0435",e(ee,{})]}),backButton:r(f,{size:"small",onClick:pu,disabled:t===0,children:[e(te,{}),"\u041D\u0430\u0437\u0430\u0434"]})})]})}),r(Z,{children:[e(f,{onClick:h,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e(f,{onClick:P,children:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})]})]})},v4=()=>{const[s,u]=o.exports.useState(!1),[t,n]=o.exports.useState(!1),[i,a]=o.exports.useState("azimuth"),[c,l]=o.exports.useState(""),[p,x]=o.exports.useState(""),k=h=>{a(h),u(!0)},A=h=>{l(h);let B="";switch(h){case"update":B=`\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u0437\u0430\u0439\u043C\u0435\u0442 3-5 \u043C\u0438\u043D\u0443\u0442.
                   \u0412 \u044D\u0442\u043E \u0432\u0440\u0435\u043C\u044F \u0441\u0435\u0440\u0432\u0435\u0440 \u0431\u0443\u0434\u0435\u0442 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D.
                   \u041D\u0435 \u043E\u0442\u043A\u043B\u044E\u0447\u0430\u0439\u0442\u0435 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u043E \u043E\u0442 \u043F\u0438\u0442\u0430\u043D\u0438\u044F.

                   \u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C?
        `;break;case"shutdown":B=`\u0412\u044B\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0441\u0435\u0440\u0432\u0435\u0440?
        `;break}x(()=>B),n(!0)},F=()=>{let h=()=>{};switch(c){case"update":h=D.updateServer;break;case"shutdown":h=D.shutdown;break}h(),v()},T=()=>{u(!1)},v=()=>{n(!1)};return r(W,{children:[e(d,{variant:"h6",children:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438"}),e(h4,{}),e(m4,{openDialog:k,openConfirm:A}),e(Y,{open:s,onCloseDialog:T,children:e(C4,{onCancel:T,mode:i})}),r(Y,{open:t,onCloseDialog:v,children:[e(K,{children:e(d,{children:"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F"})}),e(X,{children:p}),r(Z,{children:[e(f,{onClick:v,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e(f,{onClick:F,children:"Ok"})]})]})]})},H="/",y4=({routes:s})=>e(W,{children:e(se,{children:e(ye,{children:e(ne,{children:r(_,{path:`${H}`,element:e(fe,{}),children:[e(_,{path:`${H}`,element:e(Pe,{})}),r(_,{path:`${H}tasks`,element:e(ze,{}),children:[e(_,{path:`${H}tasks`,element:e(Qe,{})}),e(_,{path:`${H}tasks:id`,element:e(d4,{})})]}),r(_,{path:`${H}works`,element:e(Ge,{}),children:[e(_,{path:`${H}works`,element:e(t4,{})}),e(_,{path:"/works/current-work",element:e(r4,{})})]}),e(_,{path:`${H}settings`,element:e(v4,{})})]})})})})});const cu=re(`ws://${location.hostname}`);cu.on("connect",()=>{console.log("socket ",cu.connected)});cu.on("workStatusUpdate",s=>{w.fetch(),w.fetchCurrentWork()});cu.on("serverTime",s=>{D.setServerTime(+s)});const g4=ie({palette:{primary:{main:"#1976d2"},bgGray:{main:"#f9f9f9"}}},ae);oe.render(e(le.StrictMode,{children:e(ce,{theme:g4,children:e(de,{dateAdapter:pe,locale:xu,children:e(y4,{})})})}),document.getElementById("root"));
